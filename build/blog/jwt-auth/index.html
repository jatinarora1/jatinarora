<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">A Practical Guide for JWT Authentication Using Node.js and Express | Jatin Arora</title><meta data-react-helmet="true" property="og:title" content="A Practical Guide for JWT Authentication Using Node.js and Express | Jatin Arora"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://cdn-images-1.medium.com/max/10836/1*WrDrIa0v80eL43PK-Wtu-w.jpeg"><meta data-react-helmet="true" property="twitter:image" content="https://cdn-images-1.medium.com/max/10836/1*WrDrIa0v80eL43PK-Wtu-w.jpeg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for A Practical Guide for JWT Authentication Using Node.js and Express"><link data-react-helmet="true" rel="shortcut icon" href="/img/jatin.jpg"><link rel="stylesheet" href="/styles.d48d5b3b.css">
<link rel="preload" href="/styles.152560a6.js" as="script">
<link rel="preload" href="/runtime~main.b8677e71.js" as="script">
<link rel="preload" href="/main.48060fb2.js" as="script">
<link rel="preload" href="/1.57e2cf85.js" as="script">
<link rel="preload" href="/2.818658f0.js" as="script">
<link rel="preload" href="/3.d3fc3d6d.js" as="script">
<link rel="preload" href="/ccc49370.2475dd98.js" as="script">
<link rel="preload" href="/93592c82.9726782e.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">Jatin Arora</strong></a><a class="navbar__item navbar__link" href="/resume">Resume</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/projects">Conributions</a><a href="https://github.com/jatinarora1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Jatin Arora</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/resume">Resume</a></li><li class="menu__list-item"><a class="menu__link" href="/projects">Conributions</a></li><li class="menu__list-item"><a href="https://github.com/jatinarora1" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">A Practical Guide for JWT Authentication Using Node.js and Express</h1><div class="margin-vert--md"><time datetime="2019-01-14T00:00:00.000Z" class="blogPostDate_3bQP">January 14, 2019  ¬∑ 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/anshulrgoyal" target="_blank" rel="noreferrer noopener"><img src="/img/anshul.jpg" alt="Anshul Goyal"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/anshulrgoyal" target="_blank" rel="noreferrer noopener">Anshul Goyal</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h1><p>Traditional authentication strategy makes use of sessions and cookies, but scaling these solutions is very difficult ‚Äî as some kind of state is maintained by the server. JWT, on the other hand, provides a stateless solution for authentication, and stateless applications are pretty easy to scale.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="advantages-of-jwt"></a>Advantages of JWT<a aria-hidden="true" tabindex="-1" class="hash-link" href="#advantages-of-jwt" title="Direct link to heading">#</a></h4><ul><li><p>Provides a stateless authentication solution</p></li><li><p>Very popular and used by many OAuth service providers, like Google and Facebook</p></li><li><p>It‚Äôs very easy to verify a JWT token</p></li><li><p>More trustworthy than cookies and sessions</p></li><li><p>Authentication can be outsourced, or an authentication service can be used</p></li><li><p>Have many applications other than authentication ‚Äî for instance, it can be used for claims</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="content"></a>Content<a aria-hidden="true" tabindex="-1" class="hash-link" href="#content" title="Direct link to heading">#</a></h4><ul><li><p>JWT structure and overview</p></li><li><p>The JWT authentication mechanism</p></li><li><p>Using JWT authentication with Node.js</p></li></ul><hr><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="whats-jwt"></a>What‚Äôs JWT?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#whats-jwt" title="Direct link to heading">#</a></h1><p>A JSON Web Token (JWT) is a <a href="http://www.w3schools.com/json/" target="_blank" rel="noopener noreferrer">JSON object</a> that‚Äôs defined in <a href="https://tools.ietf.org/html/rfc7519" target="_blank" rel="noopener noreferrer">RFC 7519</a> as a safe way to represent a set of information between two parties. The token is composed of a header, a payload, and a signature.</p><p>JWT is used for authentication, and they can also be used for sharing information. Most JWT are signed using a public key and a private key; therefore, it‚Äôs very difficult to tamper with these tokens. JWT has three parts: head, body and signature, each separated by <code>‚Äú.‚Äù</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="head"></a>Head<a aria-hidden="true" tabindex="-1" class="hash-link" href="#head" title="Direct link to heading">#</a></h4><p>The head is a <code>base64Url</code><strong>-</strong>encoded, stringified JS object that contains information about the token. The head contains the type of token, the content type of the token, and an algorithm used to sign that token. The type is specified by the field type and the algorithm used to sign the token.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;alg&quot;: &quot;HS256&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;typ&quot;: &quot;JWT&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div></div></div><p>The object is then converted to a string and encoded to <code>Base64Url</code>.</p><p>The following code shows how to change the encoding using the buffer module in Node.js.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Buffer.from(JSON.stringify({</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;alg&quot;: &quot;HS256&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&quot;typ&quot;: &quot;JWT&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})).toString(&#x27;base64&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/=/g, &quot;&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/\+/g, &quot;-&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/\//g, &quot;_&quot;);</span></div></div></div></div></div><p><strong>Note: </strong><code>Base64</code> and <code>Base64URL</code> are the same; however, <code>+</code> is converted to <code>-</code>, and <code>/</code> is converted to <code>_</code> .</p><p>This is done to ensure there‚Äôs no collision between the query string and the token since <code>+</code> has a special meaning in the query string (the same goes for <code>/</code>).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="body"></a>Body<a aria-hidden="true" tabindex="-1" class="hash-link" href="#body" title="Direct link to heading">#</a></h4><p>The body is the as the head, but it contains the claim or data that‚Äôs transferred.</p><p>The body may contain special attributes like <code>iss</code> , <code>sub</code> , <code>aud</code>, <code>exp</code>, <code>iat</code>, <code>jti</code>, etc. These attributes have a standard implementation and are accepted by most OAuth services. Some interesting ones are <code>exp</code> and <code>iat</code>. <code>exp</code> specifies the time after which the token will become invalid, and <code>iat</code> specifies the time when the token was created.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;sub&quot;: &quot;90129920&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;uuid&quot;: &quot;sfgdsrfg434fdt535fg&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;iat&quot;: 1516239022,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;exp&quot;: 1545926973,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div></div></div><p>The time is used in seconds, following the 1 January 1970 format. The body is also converted to <code>Base64URL</code> using the same code as used in the head.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="signature"></a>Signature<a aria-hidden="true" tabindex="-1" class="hash-link" href="#signature" title="Direct link to heading">#</a></h4><p>This is the most important part of the token because it‚Äôs used to verify if the token is valid and authentic. Let‚Äôs see how the signature is created.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">signature=sha256(base64URL(head)+&quot;.&quot;+base64URL(body))</span></div></div></div></div></div><p>The token consists of the body and the head encrypted using any hashing algorithm ‚Äî for example, SHA-256.</p><p>The algorithm can be symmetrical or asymmetrical. It depends upon the needs of the application. The example below shows how we can create a signature for JWT.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">const crypto=require(&#x27;crypto&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const private_key=&quot;dfhghhghgdoghoghg&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const sign = crypto.createHmac(&#x27;SHA256&#x27;, private_key)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.update(head + &#x27;.&#x27; + body)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.digest(&#x27;base64&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/=/g, &quot;&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/\+/g, &quot;-&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">.replace(/\//g, &quot;_&quot;)</span></div></div></div></div></div><p>First, we create a stream from <code>crypto.createHmac</code>. We push the <code>base64url</code>-encoded head and body (separated by <code>‚Äú.‚Äù</code>) to the created stream. Then, we convert the buffer to the <code>base64</code>-encoded string and then to the <code>base64url</code>-encoded string.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="verification"></a>Verification<a aria-hidden="true" tabindex="-1" class="hash-link" href="#verification" title="Direct link to heading">#</a></h4><p>When the server verifies the token, it creates the <code>hash</code> using the private key. If the <code>hash</code> matches the signature on the token, then the token is authentic.</p><p>If the token is tempered with, the <code>hash</code> of the token should change. But the hacker can‚Äôt create the new <code>hash</code> because the key is saved with the server. Therefore, the token is verified, and the client can also be verified using the data in the body.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">token=base64url(head)+&quot;.&quot;+baser64url(body)+&quot;.&quot;+signature</span></div></div></div></div></div><hr><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="how-does-authentication-with-jwt-work"></a>How Does Authentication With JWT Work?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-does-authentication-with-jwt-work" title="Direct link to heading">#</a></h1><p>The token with <code>user_id</code> is given to the client, and the client sends the token back to the server every time the client makes an HTTP request to the server.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">body={</span></div><div class="token-line" style="color:#393A34"><span class="token plain"> user_id:&quot;123nfdwf283&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div></div></div><p>The client must store the token in the browser. The token can be saved in local storage or session storage. Using local storage will keep the user signed in until the token expires, and session storage will keep the user logged in until the browser tab is closed. The token is sent to the server in the authorization header as <code>Bearer {token}</code>.</p><hr><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-jwt-with-nodejs"></a>Using JWT With Node.js<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-jwt-with-nodejs" title="Direct link to heading">#</a></h1><p>If you don&#x27;t want to write your own custom JWT solution, you can always use an npm module for it. We‚Äôd first install Express and the <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">JSON Web Tokens library</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">npm i express jsonwebtoken mongoose body-parser bcrypt</span></div></div></div></div></div><p>The directory structure of the project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">root</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   -app.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   -user.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   -key.js</span></div></div></div></div></div><p><code>key.js</code> contains the private key, but it‚Äôs not a good practice. You should always use an <code>.env</code> variable for such sensitive data.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">module.exports={tokenKey:&quot;djghhhhuuwiwuewieuwieuriwu&quot;}</span></div></div></div></div></div><p>The user schema consists of a presave hook. When we create a new user, the password is converted to <code>hash</code> and <code>salt</code> using bcryptjs. A static method is also added to the schema for comparing passwords using <code>hash</code> and<code>salt</code>.</p><p>Passwords are never saved in the database. The passwords are converted to a <code>hash</code> using any hashing algorithm, with the help of <code>salt</code>.</p><p><code>salt</code> acts as the private key for the creating the <code>hash</code>. When the user provides a password for login, the password and <code>salt</code> are used to create a <code>hash</code>. The created <code>hash</code> is then matched with the stored one. If both <code>hash</code>es match, then the password is matched.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var mongoose = require(&#x27;mongoose&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var bcrypt = require(&#x27;bcryptjs&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var userSchema = new mongoose.Schema({</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    first: String,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    email: {type:String,unique:true},</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    password: String,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    image:String</span></div><div class="token-line" style="color:#393A34"><span class="token plain">},{timestamps:true})</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">userSchema.pre(&#x27;save&#x27;, function (next) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    var user = this;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if (!user.isModified(&#x27;password&#x27;)) {return next()};</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    bcrypt.hash(user.password,10).then((hashedPassword) =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        user.password = hashedPassword;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        next();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    })</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}, function (err) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    next(err)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})</span></div><div class="token-line" style="color:#393A34"><span class="token plain">userSchema.methods.comparePassword=function(candidatePassword,next){    bcrypt.compare(candidatePassword,this.password,function(err,isMatch){</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        if(err) return next(err);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        next(null,isMatch)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    })</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = mongoose.model(&quot;user&quot;, userSchema);</span></div></div></div></div></div><p>Let‚Äôs create a simple Express server.</p><p>The route <code>/api/auth/signin</code> first matches the password and then issues a token to the user. The token is sent by the user to the server every time in the request header, and the token is parsed by the <code>app.use</code> middleware every time.</p><p>The middleware also adds user details to the req as <code>req.user</code> . The server listens on the port <code>3001</code> .We can also write a middleware for protecting routes.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">function proctectRoute(req,res,next){</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  // if user exists the token was sent with the request</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  if(req.user){</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   //if user exists then go to next middleware</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     next();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// token was not sent with request send error to user</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  else{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     res.status(500).json({error:&#x27;login is required&#x27;});</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div></div></div><p>We can use different options with the JSON Web Tokens library. We can set the expiration time, subject, time of issue, etc.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">// we can change algorithm used</span></div><div class="token-line" style="color:#393A34"><span class="token plain">jwt.sign({ foo: &#x27;bar&#x27; }, cert,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{ algorithm:&#x27;RS256&#x27;},function(err,token) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    console.log(token);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">});</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// we can set expiration time using sync</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const token =jwt.sign({data: &#x27;foobar&#x27;}, &#x27;secret&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain"> { expiresIn: 60 * 60 });</span></div></div></div></div></div><hr><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conclusion"></a>Conclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h1><p>JSON Web Tokens are great for authentications and very easy to use. The tutorial shows us how we can use JWT for authentication using Node.js and Express.</p><p>JWT can also be used for different purposes, which includes any type of claim. The JWT used in the tutorial are signed using a symmetrical algorithm, but you can easily use asymmetrical algorithms also. In the asymmetrical algorithm, the private key is used to sign the token, and a public key is used for verifying the tokens.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/jwt">jwt</a><a class="margin-horiz--sm" href="/blog/tags/auth">auth</a><a class="margin-horiz--sm" href="/blog/tags/nodejs">nodejs</a><a class="margin-horiz--sm" href="/blog/tags/express">express</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/react-setup"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ Setting A React Project From Scratch Using Babel And Webpack</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/resume">Resume</a></li><li class="footer__item"><a class="footer__link-item" href="/projects">Contributions</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://dev.to/jatinarora1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev.to</a></li><li class="footer__item"><a href="https://medium.com/@arora8331" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://www.linkedin.com/in/jatin-a-5a3286137/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin</a></li><li class="footer__item"><a href="https://twitter.com/JATINAR27664823" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/anshulrgoyal" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright ¬© 2020 Jatin Arora.</div></div></div></footer></div>
<script src="/styles.152560a6.js"></script>
<script src="/runtime~main.b8677e71.js"></script>
<script src="/main.48060fb2.js"></script>
<script src="/1.57e2cf85.js"></script>
<script src="/2.818658f0.js"></script>
<script src="/3.d3fc3d6d.js"></script>
<script src="/ccc49370.2475dd98.js"></script>
<script src="/93592c82.9726782e.js"></script>
</body>
</html>