{"remainingRequest":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/babel-loader/lib/index.js??ref--12-1!/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/@docusaurus/mdx-loader/src/index.js??ref--12-2!/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/@docusaurus/plugin-content-blog/lib/markdownLoader.js??ref--12-3!/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/blog/2020-04-24-rust-grpc.md","dependencies":[{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/blog/2020-04-24-rust-grpc.md","mtime":1597636846610},{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/.docusaurus/docusaurus-plugin-content-blog/site-blog-2020-04-24-rust-grpc-md-1ab.json","mtime":1597651312021},{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/@docusaurus/mdx-loader/src/index.js","mtime":499162500000},{"path":"/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/node_modules/@docusaurus/plugin-content-blog/lib/markdownLoader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20iL1VzZXJzL2lubWF0aW4vRGVza3RvcC9hbnNodWxyZ295YWwvZG9jcy9qYXRpbmFyb3JhL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjtpbXBvcnQgUmVhY3QgZnJvbSdyZWFjdCc7aW1wb3J0e21keH1mcm9tJ0BtZHgtanMvcmVhY3QnO2V4cG9ydCBjb25zdCBmcm9udE1hdHRlcj17aWQ6J2dycGMtcnVzdCcsdGl0bGU6J0EgYmVnaW5uZXJzIGd1aWRlIHRvIGdSUEMgd2l0aCBSdXN0JyxhdXRob3I6J0Fuc2h1bCBHb3lhbCcsYXV0aG9yX3VybDonaHR0cHM6Ly9naXRodWIuY29tL2Fuc2h1bHJnb3lhbCcsYXV0aG9yX2ltYWdlX3VybDonL2ltZy9hbnNodWwuanBnJyx0YWdzOlsncnVzdCcsJ2dycGMnXX07ZXhwb3J0IGNvbnN0IG1ldGFkYXRhPXsicGVybWFsaW5rIjoiL2Jsb2cvZ3JwYy1ydXN0Iiwic291cmNlIjoiQHNpdGUvYmxvZy8yMDIwLTA0LTI0LXJ1c3QtZ3JwYy5tZCIsImRlc2NyaXB0aW9uIjoiVGFibGUgb2YgQ29udGVudHMiLCJkYXRlIjoiMjAyMC0wNC0yNFQwMDowMDowMC4wMDBaIiwidGFncyI6W3sibGFiZWwiOiJydXN0IiwicGVybWFsaW5rIjoiL2Jsb2cvdGFncy9ydXN0In0seyJsYWJlbCI6ImdycGMiLCJwZXJtYWxpbmsiOiIvYmxvZy90YWdzL2dycGMifV0sInRpdGxlIjoiQSBiZWdpbm5lcnMgZ3VpZGUgdG8gZ1JQQyB3aXRoIFJ1c3QiLCJyZWFkaW5nVGltZSI6MTkuMzU1LCJ0cnVuY2F0ZWQiOnRydWUsInByZXZJdGVtIjp7InRpdGxlIjoiQWxsIGluIG9uZSBndWlkZSBmb3IgY3JlYXRpbmcgYSBraWxsZXIgQVBJIHdpdGggU3RyYXBpIiwicGVybWFsaW5rIjoiL2Jsb2cvc3RyYXBpIn0sIm5leHRJdGVtIjp7InRpdGxlIjoiUnVzdCBhbmQgTm9kZS5qczogQSBtYXRjaCBtYWRlIGluIGhlYXZlbiIsInBlcm1hbGluayI6Ii9ibG9nL25vZGVqcy1ydXN0LW1hdGNoIn19Oy8qIEBqc3ggbWR4ICovZXhwb3J0IGNvbnN0IHJpZ2h0VG9jPVt7dmFsdWU6J0JyaWVmIEludHJvIHRvIGdSUEMnLGlkOidicmllZi1pbnRyby10by1ncnBjJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidBIExpdHRsZSBhYm91dCBSdXN0JyxpZDonYS1saXR0bGUtYWJvdXQtcnVzdCcsY2hpbGRyZW46W119LHt2YWx1ZTonU3ludGF4JyxpZDonc3ludGF4JyxjaGlsZHJlbjpbXX0se3ZhbHVlOidDb21waWxpbmcgUHJvdG9jb2wgQnVmZmVycycsaWQ6J2NvbXBpbGluZy1wcm90b2NvbC1idWZmZXJzJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidTdHJlYW1pbmcgUmVzcG9uc2UnLGlkOidzdHJlYW1pbmctcmVzcG9uc2UnLGNoaWxkcmVuOltdfSx7dmFsdWU6J1N0cmVhbWluZyBSZXF1ZXN0JyxpZDonc3RyZWFtaW5nLXJlcXVlc3QnLGNoaWxkcmVuOltdfSx7dmFsdWU6J0JpZGlyZWN0aW9uYWwgU3RyZWFtJyxpZDonYmlkaXJlY3Rpb25hbC1zdHJlYW0nLGNoaWxkcmVuOltdfSx7dmFsdWU6J1Rva2VuLUJhc2VkIEF1dGhlbnRpY2F0aW9uJyxpZDondG9rZW4tYmFzZWQtYXV0aGVudGljYXRpb24nLGNoaWxkcmVuOltdfSx7dmFsdWU6J011dHVhbCBUTFMgQmFzZWQgQXV0aGVudGljYXRpb24nLGlkOidtdXR1YWwtdGxzLWJhc2VkLWF1dGhlbnRpY2F0aW9uJyxjaGlsZHJlbjpbXX0se3ZhbHVlOidDb25maWd1cmluZyBDbGllbnQgYW5kIFNlcnZlcicsaWQ6J2NvbmZpZ3VyaW5nLWNsaWVudC1hbmQtc2VydmVyJyxjaGlsZHJlbjpbXX1dO2NvbnN0IGxheW91dFByb3BzPXtyaWdodFRvY307Y29uc3QgTURYTGF5b3V0PSJ3cmFwcGVyIjtleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtjb21wb25lbnRzLC4uLnByb3BzfSl7cmV0dXJuIG1keChNRFhMYXlvdXQsX2V4dGVuZHMoe30sbGF5b3V0UHJvcHMscHJvcHMse2NvbXBvbmVudHM6Y29tcG9uZW50cyxtZHhUeXBlOiJNRFhMYXlvdXQifSksbWR4KCJoMSIseyJpZCI6InRhYmxlLW9mLWNvbnRlbnRzIn0sYFRhYmxlIG9mIENvbnRlbnRzYCksbWR4KCJvbCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToib2wifSxgSW50cm9kdWN0aW9uYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYFByb3RvY29sIEJ1ZmZlcmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJvbCJ9LGBSdXN0IGFuZCBnUlBDYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYENyZWF0aW5nIGEgU2VydmVyYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYENyZWF0aW5nIGEgQ2xpZW50YCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYFN0cmVhbWluZyBpbiBnUlBDYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYEF1dGhlbnRpY2F0aW9uYCksbWR4KCJsaSIse3BhcmVudE5hbWU6Im9sIn0sYENvbmNsdXNpb25gKSksbWR4KCJoMSIseyJpZCI6ImludHJvZHVjdGlvbiJ9LGBJbnRyb2R1Y3Rpb25gKSxtZHgoInAiLG51bGwsYEhUVFAgYW5kIEpTT04gaXMgYSB2ZXJ5IHBvcHVsYXIgbWV0aG9kIGZvciBjcmVhdGluZyB3ZWIgQVBJcy4gSFRUUCBhbmQgSlNPTiBtYWtlIHNlbnNlIGJlY2F1c2UgaXQgdXNlcyBhIHZlcnkgcG9wdWxhciBwcm90b2NvbC4gSFRUUCBhbmQgSlNPTiBhcmUgdGV4dC1iYXNlZCBwcm90b2NvbCB3aGljaCBjYXVzZXMgYSBwZXJmb3JtYW5jZSBwcm9ibGVtIHNpbmNlIHNlcmlhbGl6aW5nIEpTT04gaXMgYSBzbG93IHByb2Nlc3MsIG1vc3QgSFRUUCBhbmQgSlNPTiBvciBSZXN0IEFQSXMgZG8gbm90IHN1cHBvcnQgc3RyZWFtaW5nIHdoaWNoIG1lYW5zIHdlIGNhbm5vdCBzdGFydCBwcm9jZXNzaW5nIHRoZSBkYXRhIGJlZm9yZSBpdCBhcnJpdmVzLiBSZXN0IEFQSXMgaGF2ZSB2ZXJ5IGdvb2QgdG9vbGluZyBhbmQgY29tbXVuaXR5IHN1cHBvcnQuIEFsbW9zdCBldmVyeSBwcm9ncmFtbWluZyBsYW5ndWFnZSBoYXMgYSBoaWdoLXF1YWxpdHkgaW1wbGVtZW50YXRpb24gZm9yIEhUVFAgYW5kIHNlcmlhbGl6aW5nIEpTT04uIFJlc3QgYXJjaGl0ZWN0dXJlIGRvZXNu4oCZdCBmaXQgZXZlcnkgdXNlIGNhc2UsIGl0IGlzIGRpZmZpY3VsdCB0byBwcm92aWRlIGNsaWVudCBsaWJyYXJ5IGZvciBSZXN0IEFQSXMgZm9yIGV2ZXJ5IGxhbmd1YWdlIGFuZCBtYWludGFpbiB0aGVzZSBsaWJyYXJpZXMuIFNpbmNlIHRoZXJlIGlzIG5vIGxhbmd1YWdlLWluZGVwZW5kZW50IG1ldGhvZCBmb3IgZGVmaW5pbmcgdGhlIHN0cnVjdHVyZSBvZiBKU09OIGFuZCBIVFRQIHJlcXVlc3RzLCB0aGVyZWZvcmUsIGl0IGlzIGRpZmZpY3VsdCB0byBnZW5lcmF0ZSBjbGllbnQgbGlicmFyaWVzLiBnUlBDIGlzIGFuIGF0dGVtcHQgdG8gdGFja2xlIHRoZXNlIHByb2JsZW1zLmApLG1keCgiaDIiLHsiaWQiOiJicmllZi1pbnRyby10by1ncnBjIn0sYEJyaWVmIEludHJvIHRvIGdSUENgKSxtZHgoInAiLG51bGwsYGdSUEMgaXMgYW4gb3Blbi1zb3VyY2UgcmVtb3RlIHByb2NlZHVyZSBjYWxsIHN5c3RlbSBkZXZlbG9wZWQgYnkgR29vZ2xlLiBnUlBDIGFsbG93cyB0aGUgc3lzdGVtIHRvIGNvbW11bmljYXRlIGluIGFuZCBvdXQgb2YgZGF0YSBjZW50ZXJzLCBlZmZpY2llbnRseSB0cmFuc2ZlcnJpbmcgZGF0YSBmcm9tIG1vYmlsZSwgSW9UIGRldmljZXMsIGJhY2tlbmRzIHRvIG9uZSBhbmQgb3RoZXIuIGdSUEMgY2FtZSB3aXRoIHBsdWcgYWJsZSBzdXBwb3J0IGZvciBsb2FkIGJhbGFuY2luZywgYXV0aGVudGljYXRpb24sIHRyYWNpbmcsIGV0Yy4gZ1JQQyBzdXBwb3J0cyBiaWRpcmVjdGlvbmFsIHN0cmVhbWluZyBvdmVyIEhUVFAvMi4gZ1JQQyBwcm92aWRlcyBhbiBpZGlvbWF0aWMgaW1wbGVtZW50YXRpb24gaW4gMTAgbGFuZ3VhZ2VzLiBnUlBDIGNhbiBnZW5lcmF0ZSBlZmZpY2llbnQgY2xpZW50IGxpYnJhcmllcyBhbmQgdXNlcyB0aGUgcHJvdG9jb2wgYnVmZmVyIGZvcm1hdCBmb3IgdHJhbnNmZXJyaW5nIGRhdGEgb3ZlciB0aGUgd2lyZS4gUHJvdG9jb2wgYnVmZmVycyBhcmUgYSBiaW5hcnkgZm9ybWF0IGZvciBkYXRhIHRyYW5zbWlzc2lvbi4gU2luY2UgcHJvdG9jb2wgYnVmZmVycyBhcmUgYSBiaW5hcnkgcHJvdG9jb2wsIGl0IGNhbiBiZSBzZXJpYWxpemVkIGZhc3QgYW5kIHRoZSBzdHJ1Y3R1cmUgb2YgZWFjaCBtZXNzYWdlIG11c3QgYmUgcHJlZGVmaW5lZC5gKSxtZHgoImgyIix7ImlkIjoiYS1saXR0bGUtYWJvdXQtcnVzdCJ9LGBBIExpdHRsZSBhYm91dCBSdXN0YCksbWR4KCJwIixudWxsLGBSdXN0IGlzIGEgc3lzdGVtcyBwcm9ncmFtbWluZyBsYW5ndWFnZS4gUnVzdCBwcm92aWRlcyBoaWdoIGxldmVsIGVyZ29ub21pYyB3aXRoIGxvdy1sZXZlbCBjb250cm9sLiBSdXN0IHByb3ZpZGVzIGNvbnRyb2wgb3ZlciBtZW1vcnkgbWFuYWdlbWVudCB3aXRob3V0IHRoZSBoYXNzbGUgYXNzb2NpYXRlZCB3aXRoIGl0LiBSdXN0IGhhcyBnb29kIHN1cHBvcnQgZm9yIEFzeW5jaHJvbm91cyBvcGVyYXRpb24gbWFraW5nIGl0IGEgZ29vZCBmaXQgZm9yIHdyaXRpbmcgbmV0d29ya2luZyBhcHBsaWNhdGlvbnMuIFJ1c3QgaGFzIHplcm8gY29zdCBhYnN0cmFjdGlvbiBtYWtpbmcgaXQgYmxhemluZyBmYXN0LmApLG1keCgicCIsbnVsbCxtZHgoImltZyIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7InNyYyI6Imh0dHBzOi8vcGFwZXItYXR0YWNobWVudHMuZHJvcGJveC5jb20vc181OUJFOUE1REIzRUZCRTREMjgzMzRENzc2MTFGMjMyNEJDMDlCRDQ0N0Q4REVBRDM5Q0M2NDE3RjQ3Q0FCMTY5XzE1ODc2NzYzNTk3NzRfZ3JwYy0yLnBuZyIsImFsdCI6IldvcmsgRmxvdyBTb3VyY2UoaHR0cHM6Ly9ibG9nLmxvZ3JvY2tldC5jb20vY3JlYXRpbmctYS1jcnVkLWFwaS13aXRoLW5vZGUtZXhwcmVzcy1hbmQtZ3JwYy8pIn0pKSksbWR4KCJoMSIseyJpZCI6InByb3RvY29sLWJ1ZmZlcnMifSxgUHJvdG9jb2wgQnVmZmVyc2ApLG1keCgicCIsbnVsbCxgUHJvdG9jb2wgYnVmZmVycyBhcmUgZXh0ZW5zaWJsZSwgbGFuZ3VhZ2UtbmV1dHJhbCBkYXRhIHNlcmlhbGl6aW5nIG1lY2hhbmlzbS4gSXQgaXMgZmFzdCwgc21hbGwsIGFuZCBzaW1wbGUuIFByb3RvY29sIGJ1ZmZlcnMgaGF2ZSBhIHByZWRlZmluZWQgc3RydWN0dXJlIHdpdGggaXRzIHN5bnRheCBmb3IgZGVmaW5pbmcgbWVzc2FnZXMgYW5kIHNlcnZpY2VzLiBTZXJ2aWNlcyBhcmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIGV4ZWN1dGVkIGFuZCBtZXNzYWdlcyBhcmUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gYW5kIHZhbHVlcyByZXR1cm5lZCBieSB0aGVzZSBmdW5jdGlvbnMuIFRoZXJlIGFyZSB0d28gdmVyc2lvbnMgb2YgcHJvdG9jb2wgYnVmZmVycy4gVGhpcyB0dXRvcmlhbCB3b3VsZCB1c2UgdmVyc2lvbiAzLmApLG1keCgiaDIiLHsiaWQiOiJzeW50YXgifSxgU3ludGF4YCksbWR4KCJwIixudWxsLGBQcm90b2NvbCBCdWZmZXJzIGhhdmUgYSB2ZXJ5IHNpbXBsZSBzeW50YXguIFRoZXJlIGFyZSB0d28gdGhpbmdzIHRvIGJlIGRlZmluZWQgaW4gYSBwcm90b2NvbCBidWZmZXIuYCksbWR4KCJ1bCIsbnVsbCxtZHgoImxpIix7cGFyZW50TmFtZToidWwifSxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJsaSJ9LGBzZXJ2aWNlYCksYCBJdCBkZWZpbmVzIGFsbCB0aGUgZnVuY3Rpb25hbGl0eSB0aGF0IGNhbiBiZSBjYWxsZWQgb24gYSBwYXJ0aWN1bGFyIHNlcnZpY2Ugb3Igc2VydmVyLmApLG1keCgibGkiLHtwYXJlbnROYW1lOiJ1bCJ9LG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYG1lc3NhZ2VgKSxgIEl0IGRlZmluZXMgYXJndW1lbnRzIGFuZCByZXR1cm5zIHZhbHVlcyBvZiBhbiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6ImxpIn0sYFJQQ2ApLGAgY2FsbC5gKSksbWR4KCJwIixudWxsLGBUaGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHN5bnRheGApLGAgYW5kIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBwYWNrYWdlYCksYCBtdXN0IGJlIGRlZmluZWQgaW4gZXZlcnkgcHJvdG9jb2wgYnVmZmVyIGZpbGUuIFByb3RvY29sIGJ1ZmZlciBmaWxlcyBhcmUgc2F2ZWQgd2l0aCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgLnByb3RvYCksYCBleHRlbnNpb24uYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1wcm90byJ9KSxgICAgIC8vIHZlcnNpb24gb2YgcHJvdG9jb2wgYnVmZmVyIHVzZWQKICAgIHN5bnRheCA9ICJwcm90bzMiOwoKICAgIC8vIHBhY2thZ2UgbmFtZSBmb3IgdGhlIGJ1ZmZlciB3aWxsIGJlIHVzZWQgbGF0ZXIKICAgIHBhY2thZ2UgaGVsbG87CgogICAgLy8gc2VydmljZSB3aGljaCBjYW4gYmUgZXhlY3V0ZWQKICAgIHNlcnZpY2UgU2F5IHsKICAgIC8vIGZ1bmN0aW9uIHdoaWNoIGNhbiBiZSBjYWxsZWQKICAgICAgcnBjIFNlbmQgKFNheVJlcXVlc3QpIHJldHVybnMgKFNheVJlc3BvbnNlKTsKICAgIH0KCiAgICAvLyBhcmd1bWVudAogICAgbWVzc2FnZSBTYXlSZXF1ZXN0IHsKICAgIC8vIGRhdGEgdHlwZSBhbmQgcG9zaXRpb24gb2YgZGF0YQogICAgICBzdHJpbmcgbmFtZSA9IDE7CiAgICB9CgogICAgLy8gcmV0dXJuIHZhbHVlCiAgICBtZXNzYWdlIFNheVJlc3BvbnNlIHsKICAgIC8vIGRhdGEgdHlwZSBhbmQgcG9zaXRpb24gb2YgZGF0YQogICAgICBzdHJpbmcgbWVzc2FnZSA9IDE7CiAgICB9CmApKSxtZHgoInAiLG51bGwsYEEgc2VydmljZSBpcyBkZWZpbmVkIGJ5IHVzaW5nIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzZXJ2aWNlYCksYCBrZXl3b3JkIHRoZW4gZGVmaW5pbmcgY2FsbCB1c2luZyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcnBjYCksYCBrZXl3b3JkLCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc2VuZGApLGAgaXMgdGhlIG5hbWUgb2YgdGhlIGNhbGwsIGl0IGNhbiBiZSB1c2VkIHRvIG1ha2UgYSBjYWxsLCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2F5UmVxdWVzdGApLGAgZGVmaW5lIHRoZSBhcmd1bWVudCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc2VuZGApLGAgY2FsbCB0YWtlcyBhbmQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFNheVJlc3BvbnNlYCksYCBkZWZpbmVzIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgY2FsbC4gQW55IG51bWJlciBvZiB0aGUgY2FsbCBjYW4gYmUgZGVmaW5lZCBpbiBzZXJ2aWNlLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcHJvdG8ifSksYCAgICBzZXJ2aWNlIFNheSB7CiAgICAvLyBmdW5jdGlvbiB3aGljaCBjYW4gYmUgY2FsbGVkCiAgICAgIHJwYyBTZW5kIChTYXlSZXF1ZXN0KSByZXR1cm5zIChTYXlSZXNwb25zZSk7CiAgICAgIHJwYyBUYWtlIChTYXlSZXF1ZXN0KSByZXR1cm5zIChTYXlSZXNwb25zZSk7CiAgICB9CmApKSxtZHgoInAiLG51bGwsbWR4KCJlbSIse3BhcmVudE5hbWU6InAifSxgSW1wbGVtZW50YXRpb24gb2YgdGhlc2UgZnVuY3Rpb24gaXMgbm90IGRlZmluZWQgaW4gdGhlYCksYCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgKi5wcm90bypgKSxgIGAsbWR4KCJlbSIse3BhcmVudE5hbWU6InAifSxgZmlsZSwgdGhlc2UgaW1wbGVtZW50YXRpb25zIGFyZSBwcm92aWRlZCBieSB0aGUgc2VydmVyYCkpLG1keCgicCIsbnVsbCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgQXNzaWduIE51bWJlciB0byBGaWVsZHNgKSxgClRoZSBudW1iZXIgYXNzaWduZWQgdG8gYSBmaWVsZCBpcyB2ZXJ5IGltcG9ydGFudCBiZWNhdXNlIGl0IGlzIHVzZWQgdG8gcmVjb2duaXplIHRoZSBmaWVsZCBpbiBiaW5hcnkgZGF0YS4gSXQgdGFrZXMgMSBieXRlIHRvIGVuY29kZSAwLTE1IG51bWJlcnMgYW5kIDIgYnl0ZXMgZm9yIGVuY29kaW5nIDE2LTIwNDcsIGl0IGlzIHdpc2UgdG8gdXNlIDAtMTUgZm9yIGZyZXF1ZW50bHkgb2NjdXJyaW5nIGRhdGEuIEl0IGlzIGFsc28gcmVjb21tZW5kZWQgdG8gcmVzZXJ2ZSBhIGZldyBudW1iZXJzIHNvIHRoYXQsIHRoZXNlIHJlc2VydmVkIG51bWJlcnMgY2FuIGJlIHVzZWQgbGF0ZXIgaWYgc29tZSBjaGFuZ2VzIGFyZSBtYWRlIHRvIGZvcm1hdC5gKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYERpZmZlcmVudCBEYXRhIFR5cGVzYCkpLG1keCgicCIsbnVsbCxgUHJvdG90eXBlIHN1cHBvcnQgbWFueSBkYXRhIHR5cGVzIGluY2x1ZGUgc3RyaW5nLCBpbnQsIGZsb2F0LCBib29sZWFuLCBldGMuIFRoZXNlIHR5cGVzIGNhbiBiZSByZXBlYXRlZCB1c2luZyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcmVwZWF0ZWRgKSxgIGZpZWxkIGF0dHJpYnV0ZXMuYCksbWR4KCJwIixudWxsLGBQcm90b2NvbCBidWZmZXIgc3ludGF4IGlzIGV4cGxhaW5lZCBpbiBncmVhdCBkZXRhaWwgaW4gYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvIn0pLGBvZmZpY2lhbCBkb2N1bWVudGF0aW9uLmApKSxtZHgoImgxIix7ImlkIjoicnVzdC1hbmQtZ3JwYyJ9LGBSdXN0IGFuZCBnUlBDYCksbWR4KCJwIixudWxsLGBSdXN0IGVjb3N5c3RlbSBoYXMgZ3Jvd24gcXVpdGUgYmlnIHdpdGggdmVyeSBnb29kIHF1YWxpdHkgY3JhdGVzLiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdG9uaWNgKSxgIGlzIHZlcnkgcGVyZm9ybWFudCBnUlBDIGltcGxlbWVudGF0aW9uIGZvciBSdXN0LiBUaGlzIHR1dG9yaWFsIHVzZXMgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRvbmljYCksYCBhcyB0aGUgZ1JQQyBpbXBsZW1lbnRhdGlvbiBhbmQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRvbmljLWJ1aWxkYCksYCBmb3IgY29tcGlsaW5nIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAucHJvdG9gKSxgIGZpbGVzIHRvIGNsaWVudCBsaWJyYXJpZXMuCkxldCB1cyBzdGFydCBieSBjcmVhdGluZyBhIG5ldyBjYXJnbyBwcm9qZWN0IHVzaW5nIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYXJnbyBpbml0YCksYC4gTm93IHdlIG5lZWQgdG8gY3JlYXRlIGFuIGFkZCBhIGZldyBkZXBlbmRlbmNpZXMgYW5kIGJ1aWxkIGRlcGVuZGVuY2llcy4gVGhlc2Ugd2lsbCBoZWxwIHVzIHdpdGggb3VyIHNlcnZlciBhbmQgY2xpZW50LmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtdG9tbCJ9KSxgICAgIFtwYWNrYWdlXQogICAgbmFtZSA9ICJncnBjIgogICAgdmVyc2lvbiA9ICIwLjEuMCIKICAgIGF1dGhvcnMgPSBbIkFuc2h1bCBHb3lhbCA8YW5zaHVsZ29lbDE1MTk5OUBnbWFpbC5jb20+Il0KICAgIGVkaXRpb24gPSAiMjAxOCIKCiAgICBbZGVwZW5kZW5jaWVzXQogICAgcHJvc3QgPSAiMC42LjEiCiAgICB0b25pYyA9IHt2ZXJzaW9uPSIwLjIuMCIsZmVhdHVyZXMgPSBbInRscyJdfQogICAgdG9raW8gPSB7dmVyc2lvbj0iMC4yLjE4IixmZWF0dXJlcyA9IFsic3RyZWFtIiwgIm1hY3JvcyJdfQogICAgZnV0dXJlcyA9ICIwLjMiCgogICAgW2J1aWxkLWRlcGVuZGVuY2llc10KICAgIHRvbmljLWJ1aWxkID0gIjAuMi4wIgpgKSksbWR4KCJwIixudWxsLGBUaGlzIHNob3VsZCBiZSBhIGNvbmZpZ3VyYXRpb24gZm9yIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBDYXJnby50b21sYCksYCBmaWxlLiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcHJvc3RgKSxgIHByb3ZpZGVzIGJhc2ljIHR5cGVzIGZvciBnUlBDLCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdG9raW9gKSxgIHByb3ZpZGUgYXN5bmNocm9ub3VzIHJ1bnRpbWUgYW5kIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBmdXR1cmVzYCksYCBmb3IgaGFuZGxpbmcgYXN5bmNocm9ub3VzIHN0cmVhbXMuYCksbWR4KCJoMiIseyJpZCI6ImNvbXBpbGluZy1wcm90b2NvbC1idWZmZXJzIn0sYENvbXBpbGluZyBQcm90b2NvbCBCdWZmZXJzYCksbWR4KCJwIixudWxsLGBXZSB3b3VsZCB1c2UgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGJ1aWxkLnJzYCksYCBmb3IgY29tcGlsaW5nIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgLnByb3RvYCksYCBmaWxlcyBhbmQgaW5jbHVkZSB0aGVuIGluIGJpbmFyeS4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRvbmljLWJ1aWxkYCksYCBjcmF0ZSBwcm92aWRlcyBhIG1ldGhvZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgY29tcGlsZV9wcm90b3NgKSxgIHdoaWNoIHRha2UgdGhlIHBhdGggdG8gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYC5wdG90b2ApLGAgZmlsZSBhbmQgY29tcGlsZSBpdCB0byBydXN0IGRlZmluaXRpb25zLiBGaXJzdCwgd2UgY3JlYXRlIGEgZm9sZGVyIGluIHRoZSByb290IGRpcmVjdG9yeSBuYW1lZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcHJvdG9gKSxgIGl0IHdpbGwgY29udGFpbiBhbGwgb2Ygb3V0IGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAucHJvdG9gKSxgIGZpbGVzLiBXZSBjcmVhdGUgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc2F5LnByb3RvYCksYCBmaWxlIGluIHRoaXMgZGlyZWN0b3J5LiBXaXRoIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2F5YCksYCBzZXJ2aWNlIHNob3duIGluIHRoZSBhYm92ZSBleGFtcGxlLmApLG1keCgicCIsbnVsbCxgV2UgY3JlYXRlIGEgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGJ1aWxkLnJzYCksYCB3aXRoIHRoZSBmb2xsb3dpbmcgY29kZS5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXJ1c3QifSksYCAgICBmbiBtYWluKCktPlJlc3VsdDwoKSxCb3g8ZHluIHN0ZDo6ZXJyb3I6OkVycm9yPj57CiAgICAvLyBjb21waWxpbmcgcHJvdG9zIHVzaW5nIHBhdGggb24gYnVpbGQgdGltZQogICAgICAgdG9uaWNfYnVpbGQ6OmNvbXBpbGVfcHJvdG9zKCJwcm90by9zYXkucHJvdG8iKT87CiAgICAgICBPaygoKSkKICAgIH0KYCkpLG1keCgicCIsbnVsbCxgVGhlIGFib3ZlIGNvZGUgd2lsbCBjb21waWxlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBwcm90by9zYXkucHJvdG9gKSxgIGZpbGUgYW5kIHNhdmUgaXQgaW4gYW4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYE9VVF9ESVJgKSxgIGFuZCBhZGQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYE9VVF9ESVJgKSxgIHdoaWNoIGlzIGF2YWlsYWJsZSBhdCBidWlsZCB0aW1lIHNvIHRoYXQgd2UgY2FuIHVzZSBpdCBsYXRlciBpbiBvdXIgY29kZS4gV2UgY2FuIGFsc28gcHJvdmlkZSBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgY29tcGlsaW5nIHRoZSBwcm90b2NvbCBidWZmZXJzLiBOb3cgeW91ciBkaXJlY3Rvcnkgc3RydWN0dXJlIHNob3VsZCBsb29rIGxpa2UgdGhpczpgKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7fSksYCAgICDilJzilIDilIAgYnVpbGQucnMKICAgIOKUnOKUgOKUgCBDYXJnby5sb2NrCiAgICDilJzilIDilIAgQ2FyZ28udG9tbAogICAg4pSc4pSA4pSAIHByb3RvCiAgICDilIIgICDilJTilIDilIAgc2F5LnByb3RvCiAgICDilJzilIDilIAgc3JjCiAgICAgICAg4pSc4pSA4pSAIG1haW4ucnMKYCkpLG1keCgicCIsbnVsbCxgTm93IHdlIGhhdmUgY29tcGlsZWQgb3VyIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAucHJvdG9gKSxgIGZpbGVzIHdlIHdvdWxkIHVzZSBpdCBpbiBvdXIgY29kZSB1c2luZyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdG9uaWNgKSxgIHV0aWxpdHkuIFdlIHdvdWxkIGNyZWF0ZSBhIG1vZHVsZSBmb3Igb3VyIHNlcnZlciBhbmQgY2xpZW50LiBMZXQgdXMgbmFtZSBpdCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgaGVsbC5yc2ApLGAgYW5kIHdlIHdvdWxkIGFkZCB0aGUgZm9sbG93aW5nIGNvZGUuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgLy8gdGhpcyB3b3VsZCBpbmNsdWRlIGNvZGUgZ2VuZXJhdGVkIGZvciBwYWNrYWdlIGhlbGxvIGZyb20gLnByb3RvIGZpbGUKICAgIHRvbmljOjppbmNsdWRlX3Byb3RvISgiaGVsbG8iKTsKCmApKSxtZHgoImgxIix7ImlkIjoiY3JlYXRpbmctYS1zZXJ2ZXIifSxgQ3JlYXRpbmcgYSBTZXJ2ZXJgKSxtZHgoInAiLG51bGwsYE5vdyB3ZSBoYXZlIGNvbXBpbGVkIHRoZSBwcm90b2NvbCBidWZmZXJzIHdlIGFyZSByZWFkeSB0byBidWlsZCBvdXIgc2VydmVyLiBXZSBoYXZlIHRvIHByb3ZpZGUgdGhlIGltcGxlbWVudGF0aW9uIGZvciBldmVyeSBzZXJ2aWNlIGFuZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcnBjYCksYCB3ZSBkZWZpbmVkLiBTZXJ2aWNlIHdvdWxkIGJlIGRlZmluZWQgYXMgdHJhaXRzIGFuZCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcnBjYCksYCB3b3VsZCBiZSBhIG1lbWJlciBmdW5jdGlvbiBvbiB0aGVzZSB0cmFpdHMuIFNpbmNlIFJ1c3QgZG9lc24ndCBzdXBwb3J0IGFzeW5jIHRyYWl0cyB3ZSBoYXZlIHRvIHVzZSBhbiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgYXN5Y190cmFpdGApLGAgbWFjcm8gZm9yIG92ZXJjb21pbmcgdGhpcyBsaW1pdGF0aW9uLiBXZSBjcmVhdGUgYSBmaWxlIG5hbWVkIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBzZXJ2ZXIucnNgKSxgIGFuZCBhZGQgdGhlIGZvbGxvd2luZyBjb2RlLmApLG1keCgicCIsbnVsbCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYCoqdG9uaWMtYnVpbGQqKmApLGAgYCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgd291bGQgYXV0b21hdGljYWxseSBjb21waWxlYCksYCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgKioucHJvdG8qKmApLGAgYCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgZm9sbG93aW5nIHJ1c3QgbmFtaW5nIGNvbnZlbnRpb25zIGFuZCBiZXN0IHByYWN0aWNlcy5gKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgdXNlIHRvbmljOjp7dHJhbnNwb3J0OjpTZXJ2ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBTdGF0dXN9OwogICAgdXNlIGhlbGxvOjpzYXlfc2VydmVyOjp7U2F5LCBTYXlTZXJ2ZXJ9OwogICAgdXNlIGhlbGxvOjp7U2F5UmVzcG9uc2UsIFNheVJlcXVlc3R9OwogICAgbW9kIGhlbGxvOwoKICAgIC8vIGRlZmluaW5nIGEgc3RydWN0IGZvciBvdXIgc2VydmljZQogICAgI1tkZXJpdmUoRGVmYXVsdCldCiAgICBwdWIgc3RydWN0IE15U2F5IHt9CgogICAgLy8gaW1wbGVtZW50aW5nIHJwYyBmb3Igc2VydmljZSBkZWZpbmVkIGluIC5wcm90bwogICAgI1t0b25pYzo6YXN5bmNfdHJhaXRdCiAgICBpbXBsIFNheSBmb3IgTXlTYXkgewogICAgLy8gb3VyIHJwYyBpbXBlbGVtZW50ZWQgYXMgZnVuY3Rpb24KICAgICAgICBhc3luYyBmbiBzZW5kKCZzZWxmLHJlcXVlc3Q6UmVxdWVzdDxTYXlSZXF1ZXN0PiktPlJlc3VsdDxSZXNwb25zZTxTYXlSZXNwb25zZT4sU3RhdHVzPnsKICAgIC8vIHJldHVybmluZyBhIHJlc3BvbnNlIGFzIFNheVJlc3BvbnNlIG1lc3NhZ2UgYXMgZGVmaW5lZCBpbiAucHJvdG8KICAgICAgICAgICAgT2soUmVzcG9uc2U6Om5ldyhTYXlSZXNwb25zZXsKICAgIC8vIHJlYWRpbmcgZGF0YSBmcm9tIHJlcXVlc3Qgd2hpY2ggaXMgYXdyYXBwZXIgYXJvdW5kIG91ciBTYXlSZXF1ZXN0IG1lc3NhZ2UgZGVmaW5lZCBpbiAucHJvdG8KICAgICAgICAgICAgICAgICBtZXNzYWdlOmZvcm1hdCEoImhlbGxvIHt9IixyZXF1ZXN0LmdldF9yZWYoKS5uYW1lKSwKICAgICAgICAgICAgfSkpCiAgICAgICAgfQogICAgfQoKICAgICNbdG9raW86Om1haW5dCiAgICBhc3luYyBmbiBtYWluKCkgLT4gUmVzdWx0PCgpLCBCb3g8ZHluIHN0ZDo6ZXJyb3I6OkVycm9yPj4gewogICAgLy8gZGVmaW5pbmcgYWRkcmVzcyBmb3Igb3VyIHNlcnZpY2UKICAgICAgICBsZXQgYWRkciA9ICJbOjoxXTo1MDA1MSIucGFyc2UoKS51bndyYXAoKTsKICAgIC8vIGNyZWF0aW5nIGEgc2VydmljZQogICAgICAgIGxldCBzYXkgPSBNeVNheTo6ZGVmYXVsdCgpOwogICAgICAgIHByaW50bG4hKCJTZXJ2ZXIgbGlzdGVuaW5nIG9uIHt9IiwgYWRkcik7CiAgICAvLyBhZGRpbmcgb3VyIHNlcnZpY2UgdG8gb3VyIHNlcnZlci4KICAgICAgICBTZXJ2ZXI6OmJ1aWxkZXIoKQogICAgICAgICAgICAuYWRkX3NlcnZpY2UoU2F5U2VydmVyOjpuZXcoc2F5KSkKICAgICAgICAgICAgLnNlcnZlKGFkZHIpCiAgICAgICAgICAgIC5hd2FpdD87CiAgICAgICAgT2soKCkpCiAgICB9CmApKSxtZHgoInAiLG51bGwsYEluIFJ1c3QsIG1lc3NhZ2VzIGFyZSByZXByZXNlbnRlZCBhcyBzdHJ1Y3RzIGFuZCBzZXJ2aWNlcyBhcyB0cmFpdHMgYW5kIFJQQyBhcyBmdW5jdGlvbnMuIFdlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBpbXBsYCksYCB0aGUgdHJhaXQgZm9yIG91ciBzdHJ1Y3QgYW5kIHBhc3MgaXQgdG8gb3VyIHNlcnZlci4gSW4gb3VyIGV4YW1wbGUsIHdlIHdvdWxkIGNyZWF0ZSBhIHNlbmQgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFJlcXVlc3RgKSxgIGFzIGFuIGFyZ3VtZW50IHdoaWNoIGNvbnRhaW5zIGRldGFpbHMgYWJvdXQgdGhlIHJlcXVlc3QgYW5kIHdyYXBzIG91ciBtZXNzYWdlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBTYXlSZXF1ZXN0YCksYCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYC5nZXRfcmVmYCksYCBtZXRob2QuIE5vdyBsZXQgdXMgcnVuIHRoaXMgYnkgYWRkaW5nIGEgYmluIGJsb2NrIHRvIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2FyZ28udG9tbGApLGAuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS10b21sIn0pLGAgICAgW1tiaW5dXQogICAgbmFtZSA9ICJzZXJ2ZXIiCiAgICBwYXRoID0gInNyYy9zZXJ2ZXIucnMiCmApKSxtZHgoInAiLG51bGwsYFRoaXMgd2lsbCBoZWxwIHVzIHRlc3RpbmcgYW5kIG1haW50YWluaW5nIGNvZGUgaW4gc2F2ZSByZXBvIGJ1dCBpdCBpcyBub3Qgc3VnZ2VzdGVkIGZvciBhIGxhcmdlIHByb2plY3QuCk5vdyBpZiB3ZSBydW4gdGhpcyB3aXRoIGNvbW1hbmQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGNhcmdvIHJ1bmApLGAgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYC0tXGBcYGJpbiBzZXJ2ZXJgKSxgLiBXZSBjYW4gc2VlIG91ciBzZXJ2ZXIgcnVubmluZyBhdCBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgMTI3OjA6MDoxOjUwMDUxYCksYC5gKSxtZHgoInAiLG51bGwsbWR4KCJpbWciLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJzcmMiOiJodHRwczovL3BhcGVyLWF0dGFjaG1lbnRzLmRyb3Bib3guY29tL3NfNTlCRTlBNURCM0VGQkU0RDI4MzM0RDc3NjExRjIzMjRCQzA5QkQ0NDdEOERFQUQzOUNDNjQxN0Y0N0NBQjE2OV8xNTg3NjQyMTkzMjgzX2ltYWdlLnBuZyIsImFsdCI6IkV4YW1wbGUifSkpKSxtZHgoImgxIix7ImlkIjoiY3JlYXRpbmctYS1jbGllbnQifSxgQ3JlYXRpbmcgYSBDbGllbnRgKSxtZHgoInAiLG51bGwsYE91ciBzZXJ2ZXIgaXMgcmVhZHksIG5vdyBsZXQncyB0ZXN0IGl0IGJ5IGNyZWF0aW5nIGEgY2xpZW50LiBTaW5jZSB3ZSBoYXZlIGNvbXBpbGVkIG91ciBwcm90b2NvbCBidWZmZXIgd2UgY2FuIGltcG9ydCBvdXIgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGhlbGxvLnJzYCksYCBmaWxlIGFuZCB1c2UgaXQuIFdlIGNyZWF0ZSBhIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjbGllbnQucnNgKSxgIGZpbGUgYW5kIGFkZCB0aGUgZm9sbG93aW5nIGNvZGUuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgdXNlIGhlbGxvOjpzYXlfY2xpZW50OjpTYXlDbGllbnQ7CiAgICB1c2UgaGVsbG86OlNheVJlcXVlc3Q7CgogICAgbW9kIGhlbGxvOwoKICAgICNbdG9raW86Om1haW5dCiAgICBhc3luYyBmbiBtYWluKCkgLT4gUmVzdWx0PCgpLCBCb3g8ZHluIHN0ZDo6ZXJyb3I6OkVycm9yPj4gewogICAgLy8gY3JlYXRpbmcgYSBjaGFubmVsIGllIGNvbm5lY3Rpb24gdG8gc2VydmVyCiAgICAgICAgbGV0IGNoYW5uZWwgPSB0b25pYzo6dHJhbnNwb3J0OjpDaGFubmVsOjpmcm9tX3N0YXRpYygiaHR0cDovL1s6OjFdOjUwMDUxIikKICAgICAgICAuY29ubmVjdCgpCiAgICAgICAgLmF3YWl0PzsKICAgIC8vIGNyZWF0aW5nIGdSUEMgY2xpZW50IGZyb20gY2hhbm5lbAogICAgICAgIGxldCBtdXQgY2xpZW50ID0gU2F5Q2xpZW50OjpuZXcoY2hhbm5lbCk7CiAgICAvLyBjcmVhdGluZyBhIG5ldyBSZXF1ZXN0CiAgICAgICAgbGV0IHJlcXVlc3QgPSB0b25pYzo6UmVxdWVzdDo6bmV3KAogICAgICAgICAgICBTYXlSZXF1ZXN0IHsKICAgICAgICAgICAgICAgbmFtZTpTdHJpbmc6OmZyb20oImFuc2h1bCIpCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIC8vIHNlbmRpbmcgcmVxdWVzdCBhbmQgd2FpdGluZyBmb3IgcmVzcG9uc2UKICAgICAgICBsZXQgcmVzcG9uc2UgPSBjbGllbnQuc2VuZChyZXF1ZXN0KS5hd2FpdD8uaW50b19pbm5lcigpOwogICAgICAgIHByaW50bG4hKCJSRVNQT05TRT17Oj99IiwgcmVzcG9uc2UpOwogICAgICAgIE9rKCgpKQogICAgfQpgKSksbWR4KCJwIixudWxsLGBXZSBhZGQgYSBiaW4ga2V5IHRvIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgQ2FyZ28udG9tbGApKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXRvbWwifSksYCAgICBbW2Jpbl1dCiAgICBuYW1lID0gImNsaWVudCIKICAgIHBhdGggPSAic3JjL2NsaWVudC5ycyIKYCkpLG1keCgicCIsbnVsbCxgV2UgY3JlYXRlIGEgY2hhbm5lbCB0aGF0IGlzIGFuIEhUVFAvMiBjb25uZWN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdGhlbiBmcm9tIG91ciBjbGllbnQuIEhUVFAvMiBzdXBwb3J0IHN0cmVhbXMgdGhhdCBjYW4gYmUgdXNlZCBieSBnUlBDLiBOb3cgaWYgd2UgcnVuIG91ciBjbGllbnQgd2l0aCBjb21tYW5kIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBjYXJnbyBydW5gKSxgIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGAtLWJpbiBjbGllbnRgKSxgIHdlIGNhbiBzZWUgc2VlIHRoZSByZXNwb25zZS5gKSxtZHgoInAiLG51bGwsbWR4KCJpbWciLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJzcmMiOiJodHRwczovL3BhcGVyLWF0dGFjaG1lbnRzLmRyb3Bib3guY29tL3NfNTlCRTlBNURCM0VGQkU0RDI4MzM0RDc3NjExRjIzMjRCQzA5QkQ0NDdEOERFQUQzOUNDNjQxN0Y0N0NBQjE2OV8xNTg3NjQzNTM2NDM2X2ltYWdlLnBuZyIsImFsdCI6bnVsbH0pKSksbWR4KCJoMSIseyJpZCI6ImVycm9yLWhhbmRsaW5nIn0sYEVycm9yIEhhbmRsaW5nYCksbWR4KCJwIixudWxsLGBFcnJvciBoYW5kbGluZyBpbiBnUlBDIGlzIGRvbmUgdXNpbmcgU3RhdHVzLiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdG9uaWNgKSxgIHByb3ZpZGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFN0YXR1c2ApLGAgZW51bSB3aGljaCBjYW4gYmUgcmV0dXJuZWQgaW4gY2FzZSBvZiBlcnJvciB3aXRoIGFwcHJvcHJpYXRlIGVycm9yIG1lc3NhZ2UuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgRXJyKFN0YXR1czo6dW5hdXRoZW50aWNhdGVkKCJUb2tlbiBub3QgZm91bmQiKSkKYCkpLG1keCgicCIsbnVsbCxgZ1JQQyBzdXBwb3J0IGJhcmUtYm9uZSBlcnJvciBoYW5kbGluZyBidXQgeW91IGNhbiBleHRlbmQgeW91cnNlbGYgdXNpbmcgcHJvdG9jb2wgYnVmZmVyIGhlcmUgaXMgYCxtZHgoImEiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJocmVmIjoiaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycyNlcnJvcl9tb2RlbCJ9KSxgZGV0YWlsIGV4cGxhbmF0aW9uYCkpLG1keCgiaDEiLHsiaWQiOiJzdHJlYW1pbmctaW4tZ3JwYyJ9LGBTdHJlYW1pbmcgSW4gZ1JQQ2ApLG1keCgicCIsbnVsbCxgSFRUUC8yIHN1cHBvcnRzIHN0cmVhbWluZyBhbmQgZ1JQQyBwcm92aWRlcyBhIG5pY2UgaW50ZXJmYWNlIGZvciB1c2luZyBpdC4gV2UgY2FuIHN0YXJ0IHNlbmRpbmcgdGhlIHJlc3BvbnNlIGV2ZW4gYmVmb3JlIHRoZSBjbGllbnQgZmluaXNoIHNlbmRzIHRoZSByZXF1ZXN0LiBXZSBjYW4gdXNlIGl0IHRvIHByb3ZpZGUgYW4gZWZmaWNpZW50IHNlcnZpY2UuIFRoZSBzZXJ2ZXIgaGFzIG5vdCB0byB3YWl0IGZvciB0aGUgcmVxdWVzdCBmcm9tIHRoZSBjbGllbnQgdG8gY29tcGxldGUgdGhlIHJlcXVlc3QuIFdlIG5lZWQgdG8gbWFrZSBhIGZldyBjaGFuZ2VzIHRvIG91ciBwcm90b2NvbCBidWZmZXJzIHNvIHRoYXQgaXQgcmVmbGVjdHMgdGhhdCB3ZSBzdXBwb3J0IHN0cmVhbWluZy4gV2UgbmVlZCB0byBtYWtlIGNoYW5nZXMgdG8gb3VyIHJ1c3QgY29kZSBhbHNvLiBSdXN0IGhhcyBxdWl0ZSBnb29kIHN1cHBvcnQgZm9yIGFzeW5jaHJvbm91cyBJL08uIFdlIHdvdWxkIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGB0b2tpb2ApLGAgdG8gc3RyZWFtIHJlc3BvbnNlIGFuZCByZXF1ZXN0LmApLG1keCgiaDIiLHsiaWQiOiJzdHJlYW1pbmctcmVzcG9uc2UifSxgU3RyZWFtaW5nIFJlc3BvbnNlYCksbWR4KCJwIixudWxsLGBXZSB3b3VsZCBzdGFydCBieSB0aGUgc3RyZWFtaW5nIHNlcnZlciBzaW5jZSBtb3N0IG9mIHRoZSB0aW1lIHNlcnZlciB3b3VsZCBiZSBzZW5kaW5nIGEgbGFyZ2UgYW1vdW50IG9mIGRhdGEuIFdlIHdvdWxkIHVzZSBhIHF1ZXVlIGZvciBzZW5kaW5nIGRhdGEgYnkgbXVsdGlwbGV4aW5nIGRpZmZlcmVudCB0YXNrIG9uIGEgc2luZ2xlIHRocmVhZC4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRva2lvYCksYCBwcm92aWRlIHZlcnkgZXhjZWxsZW50IG11bHRpIHNlbmRlciBzaW5nbGUgcmVjZWl2ZXIgY2hhbm5lbC5gKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYENoYW5nZXMgdG8gcHJvdG9jb2wgYnVmZmVyc2ApKSxtZHgoInAiLG51bGwsYFdlIGNoYW5nZSB0aGUgY29kZSBvZiBwcm90b2NvbCBidWZmZXIgdG8gdGhlIGZvbGxvd2luZy4gV2UgdXNlIGEgc3RyZWFtIGtleXdvcmQgaW4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHJwY2ApLGAgYW5kIHNwZWNpZnkgdGhhdCB0aGUgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHJwY2ApLGAgY2FsbCB3aWxsIHJldHVybiBhIHN0cmVhbSBvZiBtZXNzYWdlcyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgU2F5UmVzcG9uc2VgKSxgLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcnVzdCJ9KSxgICAgIHNlcnZpY2UgU2F5IHsKICAgIC8vIGZ1bmN0aW9uIHdoaWNoIGNhbiBiZSBjYWxsZWQKICAgICAgcnBjIFNlbmQgKFNheVJlcXVlc3QpIHJldHVybnMgKFNheVJlc3BvbnNlKTsKICAgIC8vIHdlIHNwZWNpZnkgdGhhdCB3ZSByZXR1cm4gYSBzdHJlYW0KICAgICAgcnBjIFNlbmRTdHJlYW0oU2F5UmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtIFNheVJlc3BvbnNlKTsKICAgIH0KYCkpLG1keCgicCIsbnVsbCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgQ2hhbmdlcyB0byBTZXJ2ZXIgQ29kZWApLGAKV2Ugd291bGQgdXNlIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGB0b2tpbzo6c3luYzo6bXBzY2ApLGAgZm9yIGNvbW11bmljYXRpbmcgYmV0d2VlbiBmdXR1cmVzLiBXZSBzZW5kIG11bHRpcGxlIHJlc3BvbnNlcyB1c2luZyB0aGlzIGNoYW5uZWwuIFdlIHdvdWxkIHVzZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgdG9raW86OnNwYXduYCksYCB0byBjcmVhdGUgYSBuZXcgdGFzayB0aGF0IGNhbiBiZSB0aGVuIHNjaGVkdWxlZC4gV2UgYWRkIHRoZSBmb2xsb3dpbmcgY29kZSB0byBvdXIgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNlcnZlci5yc2ApLGAgZmlsZS5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXJ1c3QifSksYCAgICB1c2UgdG9raW86OnN5bmM6Om1wc2M7CiAgICB1c2UgdG9uaWM6Ont0cmFuc3BvcnQ6OlNlcnZlciwgUmVxdWVzdCwgUmVzcG9uc2UsIFN0YXR1c307CiAgICB1c2UgaGVsbG86OnNheV9zZXJ2ZXI6OntTYXksIFNheVNlcnZlcn07CiAgICB1c2UgaGVsbG86OntTYXlSZXF1ZXN0LCBTYXlSZXNwb25zZX07CiAgICBtb2QgaGVsbG87CgogICAgI1tkZXJpdmUoRGVmYXVsdCldCiAgICBwdWIgc3RydWN0IE15U2F5IHt9CiAgICAjW3RvbmljOjphc3luY190cmFpdF0KICAgIGltcGwgU2F5IGZvciBNeVNheSB7CiAgICAvLyBTcGVjaWZ5IHRoZSBvdXRwdXQgb2YgcnBjIGNhbGwKICAgICAgICB0eXBlIFNlbmRTdHJlYW1TdHJlYW09bXBzYzo6UmVjZWl2ZXI8UmVzdWx0PFNheVJlc3BvbnNlLFN0YXR1cz4+OwogICAgLy8gaW1wbGVtZW50YXRpb24gZm9yIHJwYyBjYWxsCiAgICAgICAgYXN5bmMgZm4gc2VuZF9zdHJlYW0oCiAgICAgICAgICAgICZzZWxmLAogICAgICAgICAgICByZXF1ZXN0OiBSZXF1ZXN0PFNheVJlcXVlc3Q+LAogICAgICAgICkgLT4gUmVzdWx0PFJlc3BvbnNlPFNlbGY6OlNlbmRTdHJlYW1TdHJlYW0+LCBTdGF0dXM+IHsKICAgIC8vIGNyZWF0aW5nIGEgcXVldWUgb3IgY2hhbm5lbAogICAgICAgICAgICBsZXQgKG11dCB0eCwgcngpID0gbXBzYzo6Y2hhbm5lbCg0KTsKICAgIC8vIGNyZWF0aW5nIGEgbmV3IHRhc2sKICAgICAgICAgICAgdG9raW86OnNwYXduKGFzeW5jIG1vdmUgewogICAgLy8gbG9vcGluZyBhbmQgc2VuZGluZyBvdXIgcmVzcG9uc2UgdXNpbmcgc3RyZWFtCiAgICAgICAgICAgICAgICBmb3IgXyBpbiAwLi40ewogICAgLy8gc2VuZGluZyByZXNwb25zZSB0byBvdXIgY2hhbm5lbAogICAgICAgICAgICAgICAgICAgIHR4LnNlbmQoT2soU2F5UmVzcG9uc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBmb3JtYXQhKCJoZWxsbyIpLAogICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIC5hd2FpdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAvLyByZXR1cm5pbmcgb3VyIHJlY2lldmVyIHNvIHRoYXQgdG9uaWMgY2FuIGxpc3RlbiBvbiByZWNpZXZlciBhbmQgc2VuZCB0aGUgcmVzcG9uc2UgdG8gY2xpZW50CiAgICAgICAgICAgIE9rKFJlc3BvbnNlOjpuZXcocngpKQogICAgICAgIH0KICAgICAgICBhc3luYyBmbiBzZW5kKCZzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0PFNheVJlcXVlc3Q+KSAtPiBSZXN1bHQ8UmVzcG9uc2U8U2F5UmVzcG9uc2U+LCBTdGF0dXM+IHsKICAgICAgICAgICAgT2soUmVzcG9uc2U6Om5ldyhTYXlSZXNwb25zZSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiBmb3JtYXQhKCJoZWxsbyB7fSIsIHJlcXVlc3QuZ2V0X3JlZigpLm5hbWUpLAogICAgICAgICAgICB9KSkKICAgICAgICB9CiAgICB9CgogICAgI1t0b2tpbzo6bWFpbl0KICAgIGFzeW5jIGZuIG1haW4oKSAtPiBSZXN1bHQ8KCksIEJveDxkeW4gc3RkOjplcnJvcjo6RXJyb3I+PiB7CiAgICAgICAgbGV0IGFkZHIgPSAiWzo6MV06NTAwNTEiLnBhcnNlKCkudW53cmFwKCk7CiAgICAgICAgbGV0IHNheSA9IE15U2F5OjpkZWZhdWx0KCk7CiAgICAgICAgcHJpbnRsbiEoIlNlcnZlciBsaXN0ZW5pbmcgb24ge30iLCBhZGRyKTsKICAgICAgICBTZXJ2ZXI6OmJ1aWxkZXIoKQogICAgICAgICAgICAuYWRkX3NlcnZpY2UoU2F5U2VydmVyOjpuZXcoc2F5KSkKICAgICAgICAgICAgLnNlcnZlKGFkZHIpCiAgICAgICAgICAgIC5hd2FpdD87CiAgICAgICAgT2soKCkpCiAgICB9CmApKSxtZHgoInAiLG51bGwsYFdlIG5lZWQgdG8gY2hhbmdlIHRoZSBtYWluIGZ1bmN0aW9uLCB3ZSBqdXN0IGFkZCBhIG5ldyBmdW5jdGlvbiB0byB0cmFpdCBhbmQgYSB0eXBlIHRvIHNwZWNpZnkgb3VyIG91dHB1dC4gSW4gdGhpcyBuZXcgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHNlbmRfc3RyZWFtYCksYCBmdW5jdGlvbiB3ZSBjcmVhdGUgYSBjaGFubmVsIHNvIHRoYXQgd2UgY2FuIHNlbmQgYSByZXNwb25zZSBhbmQgcmV0dXJuIHRoZSByZWNlaXZlci4gVGhlIHJlY2VpdmVyIGltcGxlbWVudHMgdGhlYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYFN0cmVhbWApLGAgdHJhaXQgc28gaXQgY2FuIGJlIHN0cmVhbWVkIGJ5IEhUVFAvMiBhbmQgdGhlIHNlbmRlciBjYW4gYmUgdXNlZCBieSBtdWx0aXBsZSB0aHJlYWRzIGFuZCBpdCBpbXBsZW1lbnRzIGAsbWR4KCJpbmxpbmVDb2RlIix7cGFyZW50TmFtZToicCJ9LGBTaW5rYCksYCB0cmFpdC4gV2UgaGF2ZSBjcmVhdGVkIGEgYm91bmRlZCBjaGFubmVsIGJ1dCB3ZSBjYW4gYWxzbyB1c2UgYW4gdW5ib3VuZGVkIGNoYW5uZWwuYCksbWR4KCJwIixudWxsLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBDaGFuZ2VzIGluIENsaWVudCBDb2RlYCksYApXZSBuZWVkIHRvIG1ha2UgY2hhbmdlcyB0byByZXNwb25zZSBoYW5kbGluZy4gU2luY2UgaXQgd291bGQgYmUgYSBzdHJlYW0gbm93LCB3ZSB3b3VsZCBqdXN0IGxpc3RlbiB0byB0aGlzIHN0cmVhbSBhbmQgcHJpbnQgdGhlIHJlc3BvbnNlLiBTdHJlYW1zIGhlbHAgdG8gd3JpdGUgbm9uLWJsb2NraW5nIGNvZGUgYW5kIHVzZSByZXNvdXJjZXMgbW9yZSBlZmZpY2llbnRseS5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXJ1c3QifSksYCAgICB1c2UgaGVsbG86OnNheV9jbGllbnQ6OlNheUNsaWVudDsKICAgIHVzZSBoZWxsbzo6U2F5UmVxdWVzdDsKICAgIG1vZCBoZWxsbzsKCiAgICAjW3Rva2lvOjptYWluXQogICAgYXN5bmMgZm4gbWFpbigpIC0+IFJlc3VsdDwoKSwgQm94PGR5biBzdGQ6OmVycm9yOjpFcnJvcj4+IHsKICAgICAgICBsZXQgY2hhbm5lbCA9IHRvbmljOjp0cmFuc3BvcnQ6OkNoYW5uZWw6OmZyb21fc3RhdGljKCJodHRwOi8vWzo6MV06NTAwNTEiKQogICAgICAgIC5jb25uZWN0KCkKICAgICAgICAuYXdhaXQ/OwogICAgICAgIGxldCBtdXQgY2xpZW50ID0gU2F5Q2xpZW50OjpuZXcoY2hhbm5lbCk7CiAgICAgICAgbGV0IHJlcXVlc3QgPSB0b25pYzo6UmVxdWVzdDo6bmV3KAogICAgICAgICAgICBTYXlSZXF1ZXN0IHsKICAgICAgICAgICAgICAgbmFtZTpTdHJpbmc6OmZyb20oImFuc2h1bCIpCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIC8vIG5vdyB0aGUgcmVzcG9uc2UgaXMgc3RyZWFtCiAgICAgICAgbGV0IG11dCByZXNwb25zZSA9IGNsaWVudC5zZW5kX3N0cmVhbShyZXF1ZXN0KS5hd2FpdD8uaW50b19pbm5lcigpOwogICAgLy8gbGlzdGVuaW5nIHRvIHN0cmVhbQogICAgICAgIHdoaWxlIGxldCBTb21lKHJlcykgPSByZXNwb25zZS5tZXNzYWdlKCkuYXdhaXQ/IHsKICAgICAgICAgICAgcHJpbnRsbiEoIk5PVEUgPSB7Oj99IiwgcmVzKTsKICAgICAgICB9CiAgICAgICAgT2soKCkpCiAgICB9CmApKSxtZHgoImgyIix7ImlkIjoic3RyZWFtaW5nLXJlcXVlc3QifSxgU3RyZWFtaW5nIFJlcXVlc3RgKSxtZHgoInAiLG51bGwsYFNvbWV0aW1lcyBhbGwgdGhlIGRhdGEgaXMgbm90IGF2YWlsYWJsZSwgZm9yIGV4YW1wbGUgaW4gYSBnYW1lIGFsbCB0aGUgZGF0YSBpcyBub3QgYXZhaWxhYmxlIHRoZW4gaXQgd291bGQgbWFrZSBzdHJlYW0gdGhlIGRhdGEgYW5kIHNlbmQgYWxsIHRoZSBkYXRhIGF2YWlsYWJsZSBhbmQgc2VuZGluZyByZXN0IHdoZW4gYXZhaWxhYmxlLiBUaGlzIGFsbG93cyB1c2luZyBkYXRhIG1vcmUgZWZmaWNpZW50bHkgb24gdXNlciBkZXZpY2VzLiBXZSBuZWVkIGEgZmV3IGNoYW5nZXMgdG8gb3VyIGNvZGUuYCksbWR4KCJwIixudWxsLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBDaGFuZ2VzIHRvIHByb3RvY29sIGJ1ZmZlcmApLGAKV2Ugd291bGQgdXNlIHRoZSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc3RyZWFtYCksYCBrZXl3b3JkIHRvIHNwZWNpZnkgdGhlIGFyZ3VtZW50IGlzIGEgc3RyZWFtLiBXZSB3b3VsZCB1c2UgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHN0cmVhbWApLGAgdG8gc3BlY2lmeSB0aGF0IG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcnBjYCksYCB0YWtlcyBhIHN0cmVhbSBhcyBhbiBhcmd1bWVudC5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXJ1c3QifSksYCAgICAvLyBzZXJ2aWNlIHdoaWNoIGNhbiBiZSBleGVjdXRlZAogICAgc2VydmljZSBTYXkgewogICAgLy8gZnVuY3Rpb24gd2hpY2ggY2FuIGJlIGNhbGxlZAogICAgICBycGMgU2VuZCAoU2F5UmVxdWVzdCkgcmV0dXJucyAoU2F5UmVzcG9uc2UpOwogICAgICBycGMgU2VuZFN0cmVhbShTYXlSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0gU2F5UmVzcG9uc2UpOwogICAgLy8gdGFraW5nIGEgc3RyZWFtIGFzIHJlc3BvbnNlCiAgICAgIHJwYyBSZWNlaXZlU3RyZWFtKHN0cmVhbSBTYXlSZXF1ZXN0KSByZXR1cm5zIChTYXlSZXNwb25zZSk7CiAgICB9CmApKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYENoYW5nZXMgdG8gU2VydmVyYCksYApXZSBuZWVkIG91ciBzZXJ2ZXIgdG8gYWNjZXB0IHRoZSBzdHJlYW0gYXMgdGhlIHJlcXVlc3QuIFdlIHdvdWxkIGxpc3RlbiBvbiB0aGUgc3RyZWFtIGFuZCBjb2xsZWN0LiBUaGVuIHdlIHdvdWxkIHJlc3BvbmQgd2hlbiB0aGUgc3RyZWFtIGZpbmlzaGVzLiBJdCB3aWxsIHNhdmUgb3VyIHJlc291cmNlcyBzaW5jZSB3ZSBjYW4gd2FpdCBvbiBzdHJlYW0gYXN5bmNocm9ub3VzbHkuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgdXNlIHRva2lvOjpzeW5jOjptcHNjOwogICAgdXNlIHRvbmljOjp7dHJhbnNwb3J0OjpTZXJ2ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBTdGF0dXN9OwogICAgdXNlIGhlbGxvOjpzYXlfc2VydmVyOjp7U2F5LCBTYXlTZXJ2ZXJ9OwogICAgdXNlIGhlbGxvOjp7U2F5UmVxdWVzdCwgU2F5UmVzcG9uc2V9OwogICAgbW9kIGhlbGxvOwogICAgI1tkZXJpdmUoRGVmYXVsdCldCiAgICBwdWIgc3RydWN0IE15U2F5IHt9CiAgICAjW3RvbmljOjphc3luY190cmFpdF0KICAgIGltcGwgU2F5IGZvciBNeVNheSB7CiAgICAvLyAuLiByZXN0IG9mIHJwY3MKICAgIC8vIGNyZWF0ZSBhIG5ldyBycGMgdG8gcmVjZWl2ZSBhIHN0cmVhbQogICAgICAgIGFzeW5jIGZuIHJlY2VpdmVfc3RyZWFtKAogICAgICAgICAgICAmc2VsZiwKICAgICAgICAgICAgcmVxdWVzdDogUmVxdWVzdDx0b25pYzo6U3RyZWFtaW5nPFNheVJlcXVlc3Q+PiwKICAgICAgICApIC0+IFJlc3VsdDxSZXNwb25zZTxTYXlSZXNwb25zZT4sIFN0YXR1cz4gewogICAgLy8gY29udmVydGluZyByZXF1ZXN0IGludG8gc3RyZWFtCiAgICAgICAgICAgIGxldCBtdXQgc3RyZWFtID0gcmVxdWVzdC5pbnRvX2lubmVyKCk7CiAgICAgICAgICAgIGxldCBtdXQgbWVzc2FnZSA9IFN0cmluZzo6ZnJvbSgiIik7CiAgICAvLyBsaXN0ZW5pbmcgb24gc3RyZWFtCiAgICAgICAgICAgIHdoaWxlIGxldCBTb21lKHJlcSkgPSBzdHJlYW0ubWVzc2FnZSgpLmF3YWl0PyB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLnB1c2hfc3RyKCZmb3JtYXQhKCJIZWxsbyB7fVxcbiIsIHJlcS5uYW1lKSkKICAgICAgICAgICAgfQogICAgLy8gcmV0dXJuaW5nIHJlc3BvbnNlCiAgICAgICAgICAgIE9rKFJlc3BvbnNlOjpuZXcoU2F5UmVzcG9uc2UgeyBtZXNzYWdlIH0pKQogICAgICAgIH0KICAgIH0KICAgICNbdG9raW86Om1haW5dCiAgICBhc3luYyBmbiBtYWluKCkgLT4gUmVzdWx0PCgpLCBCb3g8ZHluIHN0ZDo6ZXJyb3I6OkVycm9yPj4gewogICAgICAgIGxldCBhZGRyID0gIls6OjFdOjUwMDUxIi5wYXJzZSgpLnVud3JhcCgpOwogICAgICAgIGxldCBzYXkgPSBNeVNheTo6ZGVmYXVsdCgpOwogICAgICAgIHByaW50bG4hKCJTZXJ2ZXIgbGlzdGVuaW5nIG9uIHt9IiwgYWRkcik7CiAgICAgICAgU2VydmVyOjpidWlsZGVyKCkKICAgICAgICAgICAgLmFkZF9zZXJ2aWNlKFNheVNlcnZlcjo6bmV3KHNheSkpCiAgICAgICAgICAgIC5zZXJ2ZShhZGRyKXRlcygpKTsKICAgICAgICAgICAgLmF3YWl0PzsKICAgICAgICBPaygoKSkKICAgIH0KYCkpLG1keCgicCIsbnVsbCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgQ2hhbmdlcyB0byBDbGllbnRgKSxgCldlIHdvdWxkIG5vdyBwcm9ncmFtIG91ciBjbGllbnQgdG8gc2VuZCBhIHN0cmVhbSB0byBvdXIgc2VydmVyLiBGb3IgdGhpcywgd2Ugd291bGQgbWltaWMgYSBzdHJlYW0gdXNpbmcgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGZ1dHVyZXNgKSxgIGNyYXRlIGFuZCBjcmVhdGUgYSBzdHJlYW0gZnJvbSBhIHZlY3Rvci5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7ImNsYXNzTmFtZSI6Imxhbmd1YWdlLXJ1c3QifSksYCAgICB1c2UgZnV0dXJlczo6c3RyZWFtOjppdGVyOwogICAgdXNlIGhlbGxvOjpzYXlfY2xpZW50OjpTYXlDbGllbnQ7CiAgICB1c2UgaGVsbG86OlNheVJlcXVlc3Q7CiAgICBtb2QgaGVsbG87CiAgICAjW3Rva2lvOjptYWluXQogICAgYXN5bmMgZm4gbWFpbigpIC0+IFJlc3VsdDwoKSwgQm94PGR5biBzdGQ6OmVycm9yOjpFcnJvcj4+IHsKICAgICAgICBsZXQgY2hhbm5lbCA9IHRvbmljOjp0cmFuc3BvcnQ6OkNoYW5uZWw6OmZyb21fc3RhdGljKCJodHRwOi8vWzo6MV06NTAwNTEiKQogICAgICAgICAgICAuY29ubmVjdCgpCiAgICAgICAgICAgIC5hd2FpdD87CiAgICAgICAgbGV0IG11dCBjbGllbnQgPSBTYXlDbGllbnQ6Om5ldyhjaGFubmVsKTsKICAgIC8vIGNyZWF0aW5nIGEgc3RyZWFtCiAgICAgICAgbGV0IHJlcXVlc3QgPSB0b25pYzo6UmVxdWVzdDo6bmV3KGl0ZXIodmVjIVsKICAgICAgICAgICAgU2F5UmVxdWVzdCB7CiAgICAgICAgICAgICAgICBuYW1lOiBTdHJpbmc6OmZyb20oImFuc2h1bCIpLAogICAgICAgICAgICB9LAogICAgICAgICAgICBTYXlSZXF1ZXN0IHsKICAgICAgICAgICAgICAgIG5hbWU6IFN0cmluZzo6ZnJvbSgicmFodWwiKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgU2F5UmVxdWVzdCB7CiAgICAgICAgICAgICAgICBuYW1lOiBTdHJpbmc6OmZyb20oInZpamF5IiksCiAgICAgICAgICAgIH0sCiAgICAgICAgXSkpOwogICAgLy8gc2VuZGluZyBzdHJlYW0KICAgICAgICBsZXQgcmVzcG9uc2UgPSBjbGllbnQucmVjZWl2ZV9zdHJlYW0ocmVxdWVzdCkuYXdhaXQ/LmludG9faW5uZXIoKTsKICAgICAgICBwcmludGxuISgiUkVTUE9OU0U9XFxue30iLCByZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICBPaygoKSkKICAgIH0KYCkpLG1keCgicCIsbnVsbCxtZHgoImltZyIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InAifSx7InNyYyI6Imh0dHBzOi8vcGFwZXItYXR0YWNobWVudHMuZHJvcGJveC5jb20vc181OUJFOUE1REIzRUZCRTREMjgzMzRENzc2MTFGMjMyNEJDMDlCRDQ0N0Q4REVBRDM5Q0M2NDE3RjQ3Q0FCMTY5XzE1ODc2NTcxMjEyMjBfaW1hZ2UucG5nIiwiYWx0IjpudWxsfSkpKSxtZHgoImgyIix7ImlkIjoiYmlkaXJlY3Rpb25hbC1zdHJlYW0ifSxgQmlkaXJlY3Rpb25hbCBTdHJlYW1gKSxtZHgoInAiLG51bGwsYFRoZSBiaWRpcmVjdGlvbmFsIHN0cmVhbSBpcyBhbHNvIHN1cHBvcnRlZCBieSBnUlBDLiBUaGUgYmlkaXJlY3Rpb25hbCBzdHJlYW0gaXMganVzdCBhIGNvbWJpbmF0aW9uIG9mIHN0cmVhbWluZyByZXF1ZXN0cyBhbmQgc3RyZWFtaW5nIHJlc3BvbnNlcy4gSGVyZSBpcyBhIHF1aWNrIGV4YW1wbGUuYCksbWR4KCJwIixudWxsLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBQcm90b2NvbCBidWZmZXJgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAKICAgIC8vIHZlcnNpb24gb2YgcHJvdG9jb2wgYnVmZmVyIHVzZWQKICAgIHN5bnRheCA9ICJwcm90bzMiOwogICAgLy8gcGFja2FnZSBuYW1lIGZvciBidWZmZXIgd2lsbCBiZSB1c2VkIGxhdGVyCiAgICBwYWNrYWdlIGhlbGxvOwogICAgLy8gc2VydmljZSB3aGljaCBjYW4gYmUgZXhlY3V0ZWQKICAgIHNlcnZpY2UgU2F5IHsKICAgIC8vIHRha2VzIGEgc3RyZWFtIGFuZCByZXR1cm5zIGEgc3RyZWFtCiAgICAgIHJwYyBCaWRpcmVjdGlvbmFsKHN0cmVhbSBTYXlSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0gU2F5UmVzcG9uc2UpOwogICAgfQogICAgLy8gYXJndW1lbnQKICAgIG1lc3NhZ2UgU2F5UmVxdWVzdCB7CiAgICAvLyBkYXRhIHR5cGUgYW5kIHBvc2l0aW9uIG9mIGRhdGEKICAgICAgc3RyaW5nIG5hbWUgPSAxOwogICAgfQogICAgLy8gcmV0dXJuIHZhbHVlCiAgICBtZXNzYWdlIFNheVJlc3BvbnNlIHsKICAgIC8vIGRhdGEgdHlwZSBhbmQgcG9zaXRpb24gb2YgZGF0YQogICAgICBzdHJpbmcgbWVzc2FnZSA9IDE7CiAgICB9CmApKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYFNldmVyYCkpLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcnVzdCJ9KSxgICAgIHVzZSB0b2tpbzo6c3luYzo6bXBzYzsKICAgIHVzZSB0b25pYzo6e3RyYW5zcG9ydDo6U2VydmVyLCBSZXF1ZXN0LCBSZXNwb25zZSwgU3RhdHVzfTsKICAgIHVzZSBoZWxsbzo6c2F5X3NlcnZlcjo6e1NheSwgU2F5U2VydmVyfTsKICAgIHVzZSBoZWxsbzo6e1NheVJlcXVlc3QsIFNheVJlc3BvbnNlfTsKICAgIG1vZCBoZWxsbzsKICAgICNbZGVyaXZlKERlZmF1bHQpXQogICAgcHViIHN0cnVjdCBNeVNheSB7fQogICAgI1t0b25pYzo6YXN5bmNfdHJhaXRdCiAgICBpbXBsIFNheSBmb3IgTXlTYXkgewogICAgLy8gZGVmaW5pbmcgcmV0dXJuIHN0cmVhbQogICAgICAgIHR5cGUgQmlkaXJlY3Rpb25hbFN0cmVhbSA9IG1wc2M6OlJlY2VpdmVyPFJlc3VsdDxTYXlSZXNwb25zZSwgU3RhdHVzPj47CiAgICAgICAgYXN5bmMgZm4gYmlkaXJlY3Rpb25hbCgKICAgICAgICAgICAgJnNlbGYsCiAgICAgICAgICAgIHJlcXVlc3Q6IFJlcXVlc3Q8dG9uaWM6OlN0cmVhbWluZzxTYXlSZXF1ZXN0Pj4sCiAgICAgICAgKSAtPiBSZXN1bHQ8UmVzcG9uc2U8U2VsZjo6QmlkaXJlY3Rpb25hbFN0cmVhbT4sIFN0YXR1cz4gewogICAgLy8gY29udmVydGluZyByZXF1ZXN0IGluIHN0cmVhbQogICAgICAgICAgICBsZXQgbXV0IHN0cmVhbWVyID0gcmVxdWVzdC5pbnRvX2lubmVyKCk7CiAgICAvLyBjcmVhdGluZyBxdWV1ZQogICAgICAgICAgICBsZXQgKG11dCB0eCwgcngpID0gbXBzYzo6Y2hhbm5lbCg0KTsKICAgICAgICAgICAgdG9raW86OnNwYXduKGFzeW5jIG1vdmUgewogICAgLy8gbGlzdGVuaW5nIG9uIHJlcXVlc3Qgc3RyZWFtCiAgICAgICAgICAgICAgICB3aGlsZSBsZXQgU29tZShyZXEpID0gc3RyZWFtZXIubWVzc2FnZSgpLmF3YWl0LnVud3JhcCgpewogICAgLy8gc2VuZGluZyBkYXRhIGFzIHNvb24gaXQgaXMgYXZhaWxhYmxlCiAgICAgICAgICAgICAgICAgICAgdHguc2VuZChPayhTYXlSZXNwb25zZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGZvcm1hdCEoImhlbGxvIHt9IiwgcmVxLm5hbWUpLAogICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIC5hd2FpdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAvLyByZXR1cm5pbmcgc3RyZWFtIGFzIHJlY2VpdmVyCiAgICAgICAgICAgIE9rKFJlc3BvbnNlOjpuZXcocngpKQogICAgICAgIH0KICAgIH0KICAgICNbdG9raW86Om1haW5dCiAgICBhc3luYyBmbiBtYWluKCkgLT4gUmVzdWx0PCgpLCBCb3g8ZHluIHN0ZDo6ZXJyb3I6OkVycm9yPj4gewogICAgICAgIGxldCBhZGRyID0gIls6OjFdOjUwMDUxIi5wYXJzZSgpLnVud3JhcCgpOwogICAgICAgIGxldCBzYXkgPSBNeVNheTo6ZGVmYXVsdCgpOwogICAgICAgIHByaW50bG4hKCJTZXJ2ZXIgbGlzdGVuaW5nIG9uIHt9IiwgYWRkcik7CiAgICAgICAgU2VydmVyOjpidWlsZGVyKCkKICAgICAgICAgICAgLmFkZF9zZXJ2aWNlKFNheVNlcnZlcjo6bmV3KHNheSkpCiAgICAgICAgICAgIC5zZXJ2ZShhZGRyKQogICAgICAgICAgICAuYXdhaXQ/OwogICAgICAgIE9rKCgpKQogICAgfQpgKSksbWR4KCJwIixudWxsLG1keCgic3Ryb25nIix7cGFyZW50TmFtZToicCJ9LGBDbGllbnRgKSksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgdXNlIGZ1dHVyZXM6OnN0cmVhbTo6aXRlcjsKICAgIHVzZSBoZWxsbzo6c2F5X2NsaWVudDo6U2F5Q2xpZW50OwogICAgdXNlIGhlbGxvOjpTYXlSZXF1ZXN0OwogICAgbW9kIGhlbGxvOwogICAgI1t0b2tpbzo6bWFpbl0KICAgIGFzeW5jIGZuIG1haW4oKSAtPiBSZXN1bHQ8KCksIEJveDxkeW4gc3RkOjplcnJvcjo6RXJyb3I+PiB7CiAgICAgICAgbGV0IGNoYW5uZWwgPSB0b25pYzo6dHJhbnNwb3J0OjpDaGFubmVsOjpmcm9tX3N0YXRpYygiaHR0cDovL1s6OjFdOjUwMDUxIikKICAgICAgICAgICAgLmNvbm5lY3QoKQogICAgICAgICAgICAuYXdhaXQ/OwogICAgICAgIGxldCBtdXQgY2xpZW50ID0gU2F5Q2xpZW50OjpuZXcoY2hhbm5lbCk7CiAgICAvLyBjcmVhdGluZyBhIGNsaWVudAogICAgICAgIGxldCByZXF1ZXN0ID0gdG9uaWM6OlJlcXVlc3Q6Om5ldyhpdGVyKHZlYyFbCiAgICAgICAgICAgIFNheVJlcXVlc3QgewogICAgICAgICAgICAgICAgbmFtZTogU3RyaW5nOjpmcm9tKCJhbnNodWwiKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgU2F5UmVxdWVzdCB7CiAgICAgICAgICAgICAgICBuYW1lOiBTdHJpbmc6OmZyb20oInJhaHVsIiksCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNheVJlcXVlc3QgewogICAgICAgICAgICAgICAgbmFtZTogU3RyaW5nOjpmcm9tKCJ2aWpheSIpLAogICAgICAgICAgICB9LAogICAgICAgIF0pKTsKICAgIC8vIGNhbGxpbmcgcnBjCiAgICAgICAgbGV0IG11dCByZXNwb25zZSA9IGNsaWVudC5iaWRpcmVjdGlvbmFsKHJlcXVlc3QpLmF3YWl0Py5pbnRvX2lubmVyKCk7CiAgICAvLyBsaXN0ZW5pbmcgb24gdGhlIHJlc3BvbnNlIHN0cmVhbQogICAgICAgIHdoaWxlIGxldCBTb21lKHJlcykgPSByZXNwb25zZS5tZXNzYWdlKCkuYXdhaXQ/IHsKICAgICAgICAgICAgcHJpbnRsbiEoIk5PVEUgPSB7Oj99IiwgcmVzKTsKICAgICAgICB9CiAgICAgICAgT2soKCkpCiAgICB9CmApKSxtZHgoInAiLG51bGwsbWR4KCJpbWciLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwIn0seyJzcmMiOiJodHRwczovL3BhcGVyLWF0dGFjaG1lbnRzLmRyb3Bib3guY29tL3NfNTlCRTlBNURCM0VGQkU0RDI4MzM0RDc3NjExRjIzMjRCQzA5QkQ0NDdEOERFQUQzOUNDNjQxN0Y0N0NBQjE2OV8xNTg3NjU4NDgwMDg5X2ltYWdlLnBuZyIsImFsdCI6IkV4YW1wbGUifSkpKSxtZHgoImgxIix7ImlkIjoiYXV0aGVudGljYXRpb24ifSxgQXV0aGVudGljYXRpb25gKSxtZHgoInAiLG51bGwsYEF1dGhlbnRpY2F0aW9uIGlzIGEgdmVyeSBpbXBvcnRhbnQgYXNwZWN0IG9mIGEgc3lzdGVtLiBnUlBDIGNvbWVzIHdpdGggcGx1ZyBhYmxlIGF1dGhlbnRpY2F0aW9uIHN1cHBvcnQuIGdSUEMgc3VwcG9ydCBtYWlubHkgdHdvIHR5cGVzIG9mIGF1dGhlbnRpY2F0aW9uOmApLG1keCgidWwiLG51bGwsbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFRva2VuLWJhc2VkIGF1dGhlbnRpY2F0aW9uYCksbWR4KCJsaSIse3BhcmVudE5hbWU6InVsIn0sYFRMUyBiYXNlZCBhdXRoZW50aWNhdGlvbmApKSxtZHgoImgyIix7ImlkIjoidG9rZW4tYmFzZWQtYXV0aGVudGljYXRpb24ifSxgVG9rZW4tQmFzZWQgQXV0aGVudGljYXRpb25gKSxtZHgoInAiLG51bGwsYEluIHRoaXMgdHV0b3JpYWwsIHdlIHdvdWxkIHVzZSBKV1QgYmFzZWQgYXV0aGVudGljYXRpb24uIEpXVCBvciBKU09OIHdlYiB0b2tlbiBwcm92aWRlcyBhbiBvcGVuLXNvdXJjZSBhbmQgc3RhdGVsZXNzIGF1dGhlbnRpY2F0aW9uIG1lY2hhbmlzbS4gV2Ugd291bGQgYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYGpzb253ZWJ0b2tlbmApLGAgY3JhdGUgZm9yIGNyZWF0aW5nIEpXVCBhbmQgdmFsaWRhdGluZyBpdC4gV2Ugd291bGQganVzdCBzZWUgaG93IHdlIGNhbiB1c2UgSldUIHdpdGggZ1JQQy5gKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYFNlcnZlcmApLGAKV2Ugd291bGQgbmVlZCB0byBhZGQgYW4gaW50ZXJjZXB0b3IsIHRoYXQgd291bGQgdmFsaWRhdGUgdG9rZW4sIGlmIHRoZSB0b2tlbiBpcyBub3QgdmFsaWQsIHdlIHdvdWxkIGp1c3QgY2xvc2UgdGhlIHJlcXVlc3QsIGlmIHRoZSB0b2tlbiBpcyB2YWxpZCB0aGVuIHdlIGZvcndhcmQgdGhlIHJlcXVlc3QgdG8gb3VyIGhhbmRsZXJzLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcnVzdCJ9KSxgICAgIGZuIGludGVyY2VwdG9yKHJlcTpSZXF1ZXN0PCgpPiktPlJlc3VsdDxSZXF1ZXN0PCgpPixTdGF0dXM+ewogICAgICAgIGxldCB0b2tlbj1tYXRjaCByZXEubWV0YWRhdGEoKS5nZXQoImF1dGhvcml6YXRpb24iKXsKICAgICAgICAgICAgU29tZSh0b2tlbik9PnRva2VuLnRvX3N0cigpLAogICAgICAgICAgICBOb25lPT5yZXR1cm4gRXJyKFN0YXR1czo6dW5hdXRoZW50aWNhdGVkKCJUb2tlbiBub3QgZm91bmQiKSkKICAgICAgICB9OwogICAgICAgIC8vIGRvIHNvbWUgdmFsaWRhdGlvbiB3aXRoIHRva2VuIGhlcmUgLi4uCiAgICAgICAgT2socmVxKQogICAgfQpgKSksbWR4KCJwIixudWxsLGBJZiB3ZSByZXR1cm4gYCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYE9rYCksYCB0aGVuIHRoZSByZXF1ZXN0IHdvdWxkIGJlIHBhc3NlZCBvbiB0byBmdW5jdGlvbnMgYnV0IGlmIHdlIHJldHVybiBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgRXJyYCksYCB3aXRoIHN0YXR1cyB0aGUgcmVxdWVzdCBpcyBjbG9zZWQgd2l0aCBwcm92aWRlZCBzdGF0dXMuIFdlIGNyZWF0ZSBhIHNlcnZpY2Ugd2l0aCB0aGlzIGludGVyY2VwdG9yLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcnVzdCJ9KSxgICAgIGxldCBzYXkgPSBNeVNheTo6ZGVmYXVsdCgpOwogICAgbGV0IHNlciA9IFNheVNlcnZlcjo6d2l0aF9pbnRlcmNlcHRvcihzYXksaW50ZXJjZXB0b3IpOwogICAgU2VydmVyOjpidWlsZGVyKCkuYWRkX3NlcnZpY2Uoc2VyKS5zZXJ2ZShhZGRyKS5hd2FpdD87CmApKSxtZHgoInAiLG51bGwsbWR4KCJzdHJvbmciLHtwYXJlbnROYW1lOiJwIn0sYENsaWVudGApLGAKV2UgbmVlZCB0byBhZGQgYW4gaW50ZXJjZXB0b3IgdG8gb3VyIGNsaWVudCBhbHNvLiBXZSB3b3VsZCBhZGQgaXQgdG8gb3VyIG1haW4gZnVuY3Rpb24gYXMgYSBjbG9zdXJlLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHsiY2xhc3NOYW1lIjoibGFuZ3VhZ2UtcnVzdCJ9KSxgICAgICAgICBsZXQgY2hhbm5lbCA9IHRvbmljOjp0cmFuc3BvcnQ6OkNoYW5uZWw6OmZyb21fc3RhdGljKCJodHRwOi8vWzo6MV06NTAwNTEiKQogICAgICAgICAgICAuY29ubmVjdCgpCiAgICAgICAgICAgIC5hd2FpdD87CiAgICAgICAgbGV0IHRva2VuID0gZ2V0X3Rva2VuKCk7Ly8gYW4gbWV0aG9kIHRvIGdldCB0b2tlbiBjYW4gYmUgYSBycGMgY2FsbCBldGMuCiAgICAgICAgbGV0IG11dCBjbGllbnQgPSBTYXlDbGllbnQ6OndpdGhfaW50ZXJjZXB0b3IoY2hhbm5lbCwgbW92ZSB8bXV0IHJlcTogUmVxdWVzdDwoKT58IHsKICAgIC8vIGFkZGluZyB0b2tlbiB0byByZXF1ZXN0LgogICAgICAgICAgICByZXEubWV0YWRhdGFfbXV0KCkuaW5zZXJ0KAogICAgICAgICAgICAgICAgImF1dGhvcml6YXRpb24iLAogICAgICAgICAgICAgICAgdG9uaWM6Om1ldGFkYXRhOjpNZXRhZGF0YVZhbHVlOjpmcm9tX3N0cigmdG9rZW4pLnVud3JhcCgpLAogICAgICAgICAgICApOwogICAgICAgICAgICBPayhyZXEpCiAgICAgICAgfSk7CmApKSxtZHgoImgyIix7ImlkIjoibXV0dWFsLXRscy1iYXNlZC1hdXRoZW50aWNhdGlvbiJ9LGBNdXR1YWwgVExTIEJhc2VkIEF1dGhlbnRpY2F0aW9uYCksbWR4KCJwIixudWxsLGBUTFMgc3RhbmRzIGZvciBUcmFuc3BvcnQgTGF5ZXIgU2VjdXJpdHksIGl0IGlzIHJlY29tbWVuZGVkIGJ5IGdSUEMgZG9jdW1lbnRhdGlvbiB0byBlbmNyeXB0IEhUVFAvMiBjb25uZWN0aW9uIHdpdGggVExTLiBXZSB3b3VsZCBUTFMgdG8gYXV0aGVudGljYXRlIGJvdGggY2xpZW50IGFuZCBzZXJ2ZXIuIFRoaXMgaXMgY2FsbGVkIE11dHVhbCBUTFMuIFdlIHdvdWxkIGNyZWF0ZSBhIHByaXZhdGUga2V5IGFuZCBwdWJsaWMga2V5IGZvciBib3RoIGNsaWVudCBhbmQgc2VydmVyLiBXZSB3b3VsZCBhbHNvIGNyZWF0ZSBhIENlcnRpZmljYXRlIEF1dGhvcml0eSBjZXJ0aWZpY2F0ZSBzbyB0aGF0IHdlIGNhbiBzaWduIG91ciBUTFMgY2VydGlmaWNhdGUuIFdlIHdvdWxkIHJlcXVpcmUgT3BlblNTTCBmb3IgY3JlYXRpbmcgY2VydGlmaWNhdGVzLmApLG1keCgicCIsbnVsbCxtZHgoInN0cm9uZyIse3BhcmVudE5hbWU6InAifSxgQ3JlYXRpbmcgQ2VydGlmaWNhdGVzYCkpLG1keCgicCIsbnVsbCxgT3BlblNTTCBpcyBhIGNvbW1hbmQtbGluZSB1dGlsaXR5IGZvciBjcmVhdGluZyBrZXlzIGFuZCBlbmNyeXB0aW9uLXJlbGF0ZWQgc3R1ZmYuIFdlIHdvdWxkIHN0YXJ0IGJ5IGNyZWF0aW5nIGEgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkgY2VydGlmaWNhdGUuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0se30pLGBvcGVuc3NsIGdlbnJzYSAtZGVzMyAtb3V0IG15X2NhLmtleSAyMDQ4CmApKSxtZHgoInAiLG51bGwsYFRoaXMgd291bGQgYWN0IGFzIG91ciBzaWduaW5nIGtleS4gV2Ugd291bGQgdXNlIGl0IHRvIHNpZ24gb3VyIFRMUyBjZXJ0aWZpY2F0ZS4gTmV4dCwgd2UgY3JlYXRlIG91ciBjZXJ0aWZpY2F0ZSB3aGljaCBpcyBjYWxsZWQgdGhlIHJvb3QgQ0EgY2VydGlmaWNhdGUuIEl0IGlzIHVzZWQgdG8gdmFsaWRhdGUgaWYgb3VyIFRMUyBjZXJ0aWZpY2F0ZSBpcwp2YWxpZGF0ZWQgb3Igbm90LmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHt9KSxgb3BlbnNzbCByZXEgLXg1MDkgLW5ldyAtbm9kZXMgLWtleSBteV9jYS5rZXkgLXNoYTI1NiAtZGF5cyAxODI1IC1vdXQgbXlfY2EucGVtCmApKSxtZHgoInAiLG51bGwsYFRoaXMgY29tbWFuZCB3b3VsZCBhc2sgeW91IGEgZmV3IHF1ZXN0aW9ucy4gRGV0YWlscyBlbnRlciBpbiB0aGlzIGRvZXNu4oCZdCBtYXR0ZXIuIElmIHlvdSBjYW4gZ2V0IHRoaXMgY2VydGlmaWNhdGUgb24gZXZlcnkgZGV2aWNlIG9uIGVhcnRoIHlvdSBiZWNvbWUgYSBjZXJ0aWZpY2F0ZSBzaWduaW5nIGF1dGhvcml0eSBsaWtlIExldOKAmXMgRW5jcnlwdCBldGMuIE5vdyBsZXQncyBjcmVhdGUgb3VyIHNlcnZlciBrZXkgYW5kIGNlcnRpZmljYXRlLmApLG1keCgicHJlIixudWxsLG1keCgiY29kZSIsX2V4dGVuZHMoe3BhcmVudE5hbWU6InByZSJ9LHt9KSxgb3BlbnNzTCBnZW5yc2EgLW91dCBzZXJ2ZXIua2V5IDIwNDgKYCkpLG1keCgicCIsbnVsbCxgVGhpcyBjb21tYW5kIHdpbGwgZ2VuZXJhdGUgYSBrZXkgZm9yIG91ciBzZXJ2ZXIuIE5vdyB3ZSBjcmVhdGUgYSBjZXJ0aWZpY2F0ZSBzaWduaW5nIHJlcXVlc3QgZm9yIG91ciBrZXkuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0se30pLGBvcGVuc3NsIHJlcSAtbmV3IC1zaGEyNTYgLWtleSBzZXJ2ZXIua2V5IC1vdXQgc2VydmVyLmNzcgpgKSksbWR4KCJwIixudWxsLGBUaGlzIHdvdWxkIGFzayB5b3Ugc29tZSBxdWVzdGlvbnMuIE5vdyB3ZSBjcmVhdGUgYSBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgc2VydmVyLmV4dGApLGAgZmlsZS4gVGhpcyBmaWxlIHdvdWxkIGNvbnRhaW4gb3VyIG5hbWUsIG91ciBkb21haW4sIG9yIHN1YmRvbWFpbi5gKSxtZHgoInByZSIsbnVsbCxtZHgoImNvZGUiLF9leHRlbmRzKHtwYXJlbnROYW1lOiJwcmUifSx7fSksYGF1dGhvcml0eUtleUlkZW50aWZpZXI9a2V5aWQsaXNzdWVyCmJhc2ljQ29uc3RyYWludHM9Q0E6RkFMU0UKa2V5VXNhZ2UgPSBkaWdpdGFsU2lnbmF0dXJlLCBub25SZXB1ZGlhdGlvbiwga2V5RW5jaXBoZXJtZW50LCBkYXRhRW5jaXBoZXJtZW50CnN1YmplY3RBbHROYW1lID0gQGFsdF9uYW1lcwoKW2FsdF9uYW1lc10KRE5TLjEgPSBsb2NhbGhvc3QKYCkpLG1keCgicCIsbnVsbCxgV2UgYWRkIG91ciBpZGVudGl0eSBpbiB0aGUgZm9ybSBvZiBETlMuIE5vdyB3ZSBydW4gdGhlIGZvbGxvd2luZyBjb21tYW5kYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0se30pLGBvcGVuc3NsIHg1MDkgLXJlcSAtaW4gc2VydmVyLmNzciAtQ0EgbXlfY2EucGVtIC1DQWtleSBteV9jYS5rZXkgLUNBY3JlYXRlc2VyaWFsIC1vdXQgc2VydmVyLnBlbSAtZGF5cyAxODI1IC1zaGEyNTYgLWV4dGZpbGUgc2VydmVyLmV4dApgKSksbWR4KCJwIixudWxsLGBZb3UgZG9u4oCZdCBuZWVkIHRvIHByb3ZpZGUgeW91ciBwcml2YXRlIGtleSBvciBzZXJ2ZXIga2V5LiBUaGlzIG1pZ2h0IGFzayB5b3UgYSBmZXcgcXVlc3Rpb25zIGFuZCBwYXNzY29kZSBwcm92aWRlZCB3aGVuIGdlbmVyYXRpbmcgdGhlIENlcnRpZmljYXRlIEF1dGhvcml0eSBrZXkuCllvdSBjYW4gZ2VuZXJhdGUgYSBDZXJ0aWZpY2F0ZSBmb3IgdGhlIGNsaWVudCB1c2luZyB0aGUgc2FtZSBjZXJ0aWZpY2F0ZSBhdXRob3JpdHkuIE5vdyB3ZSBoYXZlIGFsbCB0aGUgcmVxdWlyZWQgY2VydGlmaWNhdGVzIHRvIGxldCBjb25maWd1cmUgb3VyIHNlcnZlciBhbmQgY2xpZW50LmApLG1keCgiaDIiLHsiaWQiOiJjb25maWd1cmluZy1jbGllbnQtYW5kLXNlcnZlciJ9LGBDb25maWd1cmluZyBDbGllbnQgYW5kIFNlcnZlcmApLG1keCgicCIsbnVsbCxtZHgoImlubGluZUNvZGUiLHtwYXJlbnROYW1lOiJwIn0sYHRvbmljYCksYCBzdXBwb3J0IFRMUyB1c2luZyBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgcnVzdC10bHNgKSxgLiBXZSBjYW4gY29uZmlndXJlIFRMUyBieSBmb2xsb3dpbmcgdGhlIG1ldGhvZC5gKSxtZHgoInAiLG51bGwsYFRoaXMgc2hvd3MgaG93IHRvIGNvbmZpZ3VyZSB0aGUgY2xpZW50IGZvciBUTFMuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgICAgIC8vIGdldHRpbmcgY2VydGlmaWNhdGUgZnJvbSBkaXNrCiAgICAgICAgbGV0IGNlcnQ9aW5jbHVkZV9zdHIhKCIuLi9jbGllbnQucGVtIik7CiAgICAgICAgbGV0IGtleT1pbmNsdWRlX3N0ciEoIi4uL2NsaWVudC5rZXkiKTsKICAgICAgICAvLyBjcmVhdGluZyBpZGVudGlmeSBmcm9tIGtleSBhbmQgY2VydGlmaWNhdGUKICAgICAgICBsZXQgaWQ9dG9uaWM6OnRyYW5zcG9ydDo6SWRlbnRpdHk6OmZyb21fcGVtKGNlcnQuYXNfYnl0ZXMoKSxrZXkuYXNfYnl0ZXMoKSk7CiAgICAgICAgLy8gaW1wb3J0aW5nIG91ciBjZXJ0aWZpY2F0ZSBmb3IgQ0EKICAgICAgICBsZXQgcz1pbmNsdWRlX3N0ciEoIi4uL215X2NhLnBlbSIpOwogICAgICAgIC8vIGNvbnZlcnRpbmcgaXQgaW50byBhIGNlcnRpZmljYXRlCiAgICAgICAgbGV0IGNhPXRvbmljOjp0cmFuc3BvcnQ6OkNlcnRpZmljYXRlOjpmcm9tX3BlbShzLmFzX2J5dGVzKCkpOwogICAgICAgIC8vIHRlbGxpbmcgb3VyIGNsaWVudCB3aGF0IGlzIHRoZSBpZGVudGl0eSBvZiBvdXIgc2VydmVyCiAgICAgICAgbGV0IHRscz10b25pYzo6dHJhbnNwb3J0OjpDbGllbnRUbHNDb25maWc6Om5ldygpLmRvbWFpbl9uYW1lKCJsb2NhbGhvc3QiKS5pZGVudGl0eShpZCkuY2FfY2VydGlmaWNhdGUoY2EpOwogICAgICAgIC8vIGNvbm5lY3Rpbmcgd2l0aCB0bHMKICAgICAgICBsZXQgY2hhbm5lbCA9IHRvbmljOjp0cmFuc3BvcnQ6OkNoYW5uZWw6OmZyb21fc3RhdGljKCJodHRwOi8vWzo6MV06NTAwNTEiKQogICAgICAgICAgICAudGxzX2NvbmZpZyh0bHMpCiAgICAgICAgICAgIC5jb25uZWN0KCkKICAgICAgICAgICAgLmF3YWl0PzsKYCkpLG1keCgicCIsbnVsbCxgVGhpcyBzaG93cyBob3cgdG8gY29uZmlndXJlIGZvciBUTFMuYCksbWR4KCJwcmUiLG51bGwsbWR4KCJjb2RlIixfZXh0ZW5kcyh7cGFyZW50TmFtZToicHJlIn0seyJjbGFzc05hbWUiOiJsYW5ndWFnZS1ydXN0In0pLGAgICAgICAgIGxldCBzYXkgPSBNeVNheTo6ZGVmYXVsdCgpOwogICAgLy8gcmVhZGluZyBjZXJ0IGFuZCBrZXkgZGlzawogICAgICAgIGxldCBjZXJ0ID0gaW5jbHVkZV9zdHIhKCIuLi9zZXJ2ZXIucGVtIik7CiAgICAgICAgbGV0IGtleSA9IGluY2x1ZGVfc3RyISgiLi4vc2VydmVyLmtleSIpOwogICAgLy8gY3JlYXRpbmcgaWRlbnRpdHkgZnJvbSBjZXJ0IGFuZCBrZXkKICAgICAgICBsZXQgaWQgPSB0b25pYzo6dHJhbnNwb3J0OjpJZGVudGl0eTo6ZnJvbV9wZW0oY2VydC5hc19ieXRlcygpLCBrZXkuYXNfYnl0ZXMoKSk7CiAgICAvLyByZWFkaW5nIGNhIHJvb3QgZnJvbSBkaXNrCiAgICAgICAgbGV0IHMgPSBpbmNsdWRlX3N0ciEoIi4uL215X2NhLnBlbSIpOwogICAgLy8gY3JlYXRpbmcgY2VydGlmaWNhdGUKICAgICAgICBsZXQgY2EgPSB0b25pYzo6dHJhbnNwb3J0OjpDZXJ0aWZpY2F0ZTo6ZnJvbV9wZW0ocy5hc19ieXRlcygpKTsKICAgIC8vIGNyZWF0aW5nIHRscyBjb25maWcKICAgICAgICBsZXQgdGxzID0gdG9uaWM6OnRyYW5zcG9ydDo6U2VydmVyVGxzQ29uZmlnOjpuZXcoKQogICAgICAgICAgICAuaWRlbnRpdHkoaWQpCiAgICAgICAgICAgIC5jbGllbnRfY2Ffcm9vdChjYSk7CiAgICAvLyBjcmVhdGluZyBzZXJ2ZXIgd2l0aCB0bHMKICAgICAgICBTZXJ2ZXI6OmJ1aWxkZXIoKQogICAgICAgICAgICAudGxzX2NvbmZpZyh0bHMpCiAgICAgICAgICAgIC5hZGRfc2VydmljZShzZXIpCiAgICAgICAgICAgIC5zZXJ2ZShhZGRyKQogICAgICAgICAgICAuYXdhaXQ/OwogICAgICAgIE9rKCgpKQoKYCkpLG1keCgiaDEiLHsiaWQiOiJjb25jbHVzaW9uIn0sYENvbmNsdXNpb25gKSxtZHgoInAiLG51bGwsYFdlIGhhdmUgZ29uZSB0aHJvdWdoIGJhc2ljIHByb3RvY29sIGJ1ZmZlciBhbmQgZ1JQQy4gV2UgaGF2ZSBjcmVhdGVkIG91ciBzZXJ2ZXIuIFdlIGFsc28gY3JlYXRlZCBhIGNsaWVudCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc2VydmVyLiBXZSBsZWFybmVkIGhvdyB0byBjb21waWxlIG91ciBgLG1keCgiaW5saW5lQ29kZSIse3BhcmVudE5hbWU6InAifSxgLnByb3RvYCksYCBmaWxlIGluIHJ1c3QgY2xpZW50LiBXZSBhbHNvIGxlYXJuZWQgaG93IHRvIHN0cmVhbSByZXNwb25zZXMgYW5kIHJlcXVlc3RzLiBXZSBhbHNvIGNyZWF0ZWQgYSBiaWRpcmVjdGlvbmFsIHN0cmVhbS4gV2UgbGVhcm5lZCB0d28gZGlmZmVyZW50IGF1dGhlbnRpY2F0aW9uIHN0cmF0ZWd5LiBXZSBpbXBsZW1lbnRlZCBKV1QgYW5kIE11dHVhbCBUTFMgYmFzZWQgYXV0aGVudGljYXRpb24uIE5vdyB5b3UgaGF2ZSBhIGJhc2ljIHVuZGVyc3RhbmRpbmcgb2YgZ1JQQywgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gbWljcm8tc2VydmljZSBiYXNlZCBhcHAuIGdSUEMgY29tZXMgd2l0aCBzdXBwb3J0IGZvciBsb2FkLWJhbGFuY2luZyx0cmFjaW5nIGFuZCBoZWFsdGggdHJhY2tpbmcuIE5vdyB5b3UgY2FuIGV4cGxvcmUgZnVydGhlciBmdW5jdGlvbmFsaXR5IG9mIGdSUEMuYCkpO307TURYQ29udGVudC5pc01EWENvbXBvbmVudD10cnVlOw=="},{"version":3,"sources":["/Users/inmatin/Desktop/anshulrgoyal/docs/jatinarora/blog/2020-04-24-rust-grpc.md"],"names":["React","mdx","frontMatter","id","title","author","author_url","author_image_url","tags","metadata","rightToc","value","children","layoutProps","MDXLayout","MDXContent","components","props","isMDXComponent"],"mappings":"0HACE,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,eAApB,CAEA,MAAO,MAAMC,CAAAA,WAAW,CAAG,CAC5BC,EAAE,CAAE,WADwB,CAE5BC,KAAK,CAAE,qCAFqB,CAG5BC,MAAM,CAAE,cAHoB,CAI5BC,UAAU,CAAE,iCAJgB,CAK5BC,gBAAgB,CAAE,iBALU,CAM5BC,IAAI,CAAE,CACL,MADK,CAEL,MAFK,CANsB,CAApB,CAWT,MAAO,MAAMC,CAAAA,QAAQ,CAAG,CACtB,YAAa,iBADS,CAEtB,SAAU,oCAFY,CAGtB,cAAe,mBAHO,CAItB,OAAQ,0BAJc,CAKtB,OAAQ,CACN,CACE,QAAS,MADX,CAEE,YAAa,iBAFf,CADM,CAKN,CACE,QAAS,MADX,CAEE,YAAa,iBAFf,CALM,CALc,CAetB,QAAS,qCAfa,CAgBtB,cAAe,MAhBO,CAiBtB,YAAa,IAjBS,CAkBtB,WAAY,CACV,QAAS,wDADC,CAEV,YAAa,cAFH,CAlBU,CAsBtB,WAAY,CACV,QAAS,0CADC,CAEV,YAAa,yBAFH,CAtBU,CAAjB,CA2BL,cAEF,MAAO,MAAMC,CAAAA,QAAQ,CAAG,CAAC,CACvBC,KAAK,CAAE,qBADgB,CAEvBR,EAAE,CAAE,qBAFmB,CAGvBS,QAAQ,CAAE,EAHa,CAAD,CAIrB,CACDD,KAAK,CAAE,qBADN,CAEDR,EAAE,CAAE,qBAFH,CAGDS,QAAQ,CAAE,EAHT,CAJqB,CAQrB,CACDD,KAAK,CAAE,QADN,CAEDR,EAAE,CAAE,QAFH,CAGDS,QAAQ,CAAE,EAHT,CARqB,CAYrB,CACDD,KAAK,CAAE,4BADN,CAEDR,EAAE,CAAE,4BAFH,CAGDS,QAAQ,CAAE,EAHT,CAZqB,CAgBrB,CACDD,KAAK,CAAE,oBADN,CAEDR,EAAE,CAAE,oBAFH,CAGDS,QAAQ,CAAE,EAHT,CAhBqB,CAoBrB,CACDD,KAAK,CAAE,mBADN,CAEDR,EAAE,CAAE,mBAFH,CAGDS,QAAQ,CAAE,EAHT,CApBqB,CAwBrB,CACDD,KAAK,CAAE,sBADN,CAEDR,EAAE,CAAE,sBAFH,CAGDS,QAAQ,CAAE,EAHT,CAxBqB,CA4BrB,CACDD,KAAK,CAAE,4BADN,CAEDR,EAAE,CAAE,4BAFH,CAGDS,QAAQ,CAAE,EAHT,CA5BqB,CAgCrB,CACDD,KAAK,CAAE,iCADN,CAEDR,EAAE,CAAE,iCAFH,CAGDS,QAAQ,CAAE,EAHT,CAhCqB,CAoCrB,CACDD,KAAK,CAAE,+BADN,CAEDR,EAAE,CAAE,+BAFH,CAGDS,QAAQ,CAAE,EAHT,CApCqB,CAAjB,CA0CP,KAAMC,CAAAA,WAAW,CAAG,CAClBH,QADkB,CAApB,CAGA,KAAMI,CAAAA,SAAS,CAAG,SAAlB,CACA,cAAe,SAASC,CAAAA,UAAT,CAAoB,CACjCC,UADiC,CAEjC,GAAGC,KAF8B,CAApB,CAGZ,CACD,MAAO,KAAC,SAAD,aAAeJ,WAAf,CAAgCI,KAAhC,EAAuC,UAAU,CAAED,UAAnD,CAA+D,OAAO,CAAC,WAAvE,GAEL,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CAFK,CAKL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,cAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,iBAAtB,CAFF,CAGE,UAAI,UAAU,CAAC,IAAf,EAAsB,eAAtB,CAHF,CAIE,UAAI,UAAU,CAAC,IAAf,EAAsB,mBAAtB,CAJF,CAKE,UAAI,UAAU,CAAC,IAAf,EAAsB,mBAAtB,CALF,CAME,UAAI,UAAU,CAAC,IAAf,EAAsB,mBAAtB,CANF,CAOE,UAAI,UAAU,CAAC,IAAf,EAAsB,gBAAtB,CAPF,CAQE,UAAI,UAAU,CAAC,IAAf,EAAsB,YAAtB,CARF,CALK,CAkBL,SAAQ,CACN,KAAM,cADA,CAAR,CAEK,cAFL,CAlBK,CAqBL,aAAK,42BAAL,CArBK,CAsBL,SAAQ,CACN,KAAM,qBADA,CAAR,CAEK,qBAFL,CAtBK,CAyBL,aAAK,gtBAAL,CAzBK,CA0BL,SAAQ,CACN,KAAM,qBADA,CAAR,CAEK,qBAFL,CA1BK,CA6BL,aAAK,0VAAL,CA7BK,CA8BL,aAAG,oBAAK,UAAU,CAAC,GAAhB,EAAwB,CACvB,MAAO,mIADgB,CAEvB,MAAO,8FAFgB,CAAxB,EAAH,CA9BK,CAkCL,SAAQ,CACN,KAAM,kBADA,CAAR,CAEK,kBAFL,CAlCK,CAqCL,aAAK,oaAAL,CArCK,CAsCL,SAAQ,CACN,KAAM,QADA,CAAR,CAEK,QAFL,CAtCK,CAyCL,aAAK,sGAAL,CAzCK,CA0CL,cACE,UAAI,UAAU,CAAC,IAAf,EAAoB,kBAAY,UAAU,CAAC,IAAvB,EAA8B,SAA9B,CAApB,CAA0E,yFAA1E,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAoB,kBAAY,UAAU,CAAC,IAAvB,EAA8B,SAA9B,CAApB,CAA0E,iDAA1E,CAA2H,kBAAY,UAAU,CAAC,IAAvB,EAA8B,KAA9B,CAA3H,CAA6K,QAA7K,CAFF,CA1CK,CA8CL,aAAK,MAAL,CAAW,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAX,CAA+D,OAA/D,CAAsE,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAAtE,CAA2H,uFAA3H,CAAkN,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAlN,CAAsQ,aAAtQ,CA9CK,CA+CL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,gBADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CA/CK,CAyEL,aAAK,gCAAL,CAAqC,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAArC,CAA0F,oCAA1F,CAA8H,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAA9H,CAA+K,YAA/K,CAA2L,kBAAY,UAAU,CAAC,GAAvB,EAA6B,MAA7B,CAA3L,CAA6O,2DAA7O,CAAwS,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAAxS,CAAgW,uBAAhW,CAAuX,kBAAY,UAAU,CAAC,GAAvB,EAA6B,MAA7B,CAAvX,CAAya,kBAAza,CAA2b,kBAAY,UAAU,CAAC,GAAvB,EAA6B,aAA7B,CAA3b,CAAof,4FAApf,CAzEK,CA0EL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,gBADe,CAA3B,EAEE;;;;;CAFF,CAAL,CA1EK,CAkFL,aAAG,UAAI,UAAU,CAAC,GAAf,EAAqB,wDAArB,CAAH,CAAuF,GAAvF,CAA0F,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAA1F,CAAgJ,GAAhJ,CAAmJ,UAAI,UAAU,CAAC,GAAf,EAAqB,wDAArB,CAAnJ,CAlFK,CAmFL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,yBAAzB,CAAH,CAAgE;gXAAhE,CAnFK,CAqFL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,sBAAzB,CAAH,CArFK,CAsFL,aAAK,gHAAL,CAAqH,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAArH,CAA2K,oBAA3K,CAtFK,CAuFL,aAAK,yDAAL,CAA8D,kBAAG,UAAU,CAAC,GAAd,EAAsB,CAChF,OAAQ,2DADwE,CAAtB,EAEvD,yBAFuD,CAA9D,CAvFK,CA0FL,SAAQ,CACN,KAAM,eADA,CAAR,CAEK,eAFL,CA1FK,CA6FL,aAAK,oEAAL,CAAyE,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAzE,CAA4H,uEAA5H,CAAmM,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAnM,CAAsP,kCAAtP,CAAwR,kBAAY,UAAU,CAAC,GAAvB,EAA6B,aAA7B,CAAxR,CAAiV,iBAAjV,CAAkW,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAlW,CAAsZ;oDAAtZ,CACiD,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CADjD,CACyG,0HADzG,CA7FK,CA+FL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;CAFF,CAAL,CA/FK,CAgHL,aAAK,qCAAL,CAA0C,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAA1C,CAAkG,SAAlG,CAA2G,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAA3G,CAA8J,kCAA9J,CAAgM,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAhM,CAAmP,oCAAnP,CAAuR,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAAvR,CAA4U,qCAA5U,CAhHK,CAiHL,SAAQ,CACN,KAAM,4BADA,CAAR,CAEK,4BAFL,CAjHK,CAoHL,aAAK,eAAL,CAAoB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAApB,CAA0E,qBAA1E,CAA+F,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAA/F,CAAmJ,qCAAnJ,CAAwL,kBAAY,UAAU,CAAC,GAAvB,EAA6B,aAA7B,CAAxL,CAAiP,2BAAjP,CAA4Q,kBAAY,UAAU,CAAC,GAAvB,EAA6B,gBAA7B,CAA5Q,CAAwU,0BAAxU,CAAkW,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAlW,CAAsZ,kGAAtZ,CAAwf,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAxf,CAA2iB,8BAA3iB,CAAykB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAzkB,CAA6nB,sBAA7nB,CAAmpB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAAnpB,CAA0sB,oCAA1sB,CAA8uB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAA9uB,CAA+xB,sCAA/xB,CApHK,CAqHL,aAAK,cAAL,CAAmB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAAnB,CAAyE,2BAAzE,CArHK,CAsHL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;CAFF,CAAL,CAtHK,CA8HL,aAAK,8BAAL,CAAmC,kBAAY,UAAU,CAAC,GAAvB,EAA6B,iBAA7B,CAAnC,CAAgG,0BAAhG,CAA0H,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAA1H,CAA+K,mCAA/K,CAAkN,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAAlN,CAAuQ,0MAAvQ,CA9HK,CA+HL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;;;;;;;CAAjC,CAAL,CA/HK,CAuIL,aAAK,2BAAL,CAAgC,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAhC,CAAoF,2CAApF,CAA+H,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAA/H,CAAkL,+EAAlL,CAAiQ,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAAjQ,CAAsT,uCAAtT,CAvIK,CAwIL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;CAFF,CAAL,CAxIK,CA8IL,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CA9IK,CAiJL,aAAK,0IAAL,CAA+I,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAA/I,CAAgM,sDAAhM,CAAsP,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAAtP,CAAuS,yGAAvS,CAAgZ,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAAhZ,CAAwc,gEAAxc,CAAwgB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAAxgB,CAA+jB,8BAA/jB,CAjJK,CAkJL,aAAG,kBAAY,UAAU,CAAC,GAAvB,EAA6B,iBAA7B,CAAH,CAAgE,GAAhE,CAAmE,cAAQ,UAAU,CAAC,GAAnB,EAAyB,6BAAzB,CAAnE,CAAoI,GAApI,CAAuI,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAAvI,CAA+L,GAA/L,CAAkM,cAAQ,UAAU,CAAC,GAAnB,EAAyB,uDAAzB,CAAlM,CAlJK,CAmJL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAnJK,CA0LL,aAAK,+FAAL,CAAoG,kBAAY,UAAU,CAAC,GAAvB,EAA6B,MAA7B,CAApG,CAAsJ,mHAAtJ,CAAyQ,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CAAzQ,CAA8T,iFAA9T,CAA+Y,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAA/Y,CAAuc,+BAAvc,CAAse,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAAte,CAA4hB,4DAA5hB,CAAwlB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAAxlB,CAAgpB,GAAhpB,CA1LK,CA2LL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;CAFF,CAAL,CA3LK,CAiML,aAAK;iCAAL,CAC8B,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAD9B,CACqF,GADrF,CACwF,kBAAY,UAAU,CAAC,GAAvB,EAA6B,kBAA7B,CADxF,CACsJ,qCADtJ,CAC2L,kBAAY,UAAU,CAAC,GAAvB,EAA6B,iBAA7B,CAD3L,CACwP,GADxP,CAjMK,CAmML,aAAG,oBAAK,UAAU,CAAC,GAAhB,EAAwB,CACvB,MAAO,kIADgB,CAEvB,MAAO,SAFgB,CAAxB,EAAH,CAnMK,CAuML,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CAvMK,CA0ML,aAAK,4HAAL,CAAiI,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAAjI,CAAuL,gCAAvL,CAAuN,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAAvN,CAA8Q,mCAA9Q,CA1MK,CA2ML,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CA3MK,CAsOL,aAAK,0BAAL,CAA+B,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAA/B,CAtOK,CAuOL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;CAFF,CAAL,CAvOK,CA6OL,aAAK,iLAAL,CAAsL,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAAtL,CAA6O,GAA7O,CAAgP,kBAAY,UAAU,CAAC,GAAvB,EAA6B,cAA7B,CAAhP,CAA0S,+BAA1S,CA7OK,CA8OL,aAAG,oBAAK,UAAU,CAAC,GAAhB,EAAwB,CACvB,MAAO,kIADgB,CAEvB,MAAO,IAFgB,CAAxB,EAAH,CA9OK,CAkPL,SAAQ,CACN,KAAM,gBADA,CAAR,CAEK,gBAFL,CAlPK,CAqPL,aAAK,+CAAL,CAAoD,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAApD,CAAuG,WAAvG,CAAkH,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAlH,CAAsK,8EAAtK,CArPK,CAsPL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;CAFF,CAAL,CAtPK,CA0PL,aAAK,kGAAL,CAAuG,kBAAG,UAAU,CAAC,GAAd,EAAsB,CACzH,OAAQ,yDADiH,CAAtB,EAEhG,oBAFgG,CAAvG,CA1PK,CA6PL,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CA7PK,CAgQL,aAAK,kfAAL,CAAuf,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAvf,CAA0iB,kCAA1iB,CAhQK,CAiQL,SAAQ,CACN,KAAM,oBADA,CAAR,CAEK,oBAFL,CAjQK,CAoQL,aAAK,yMAAL,CAA8M,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAA9M,CAAiQ,+DAAjQ,CApQK,CAqQL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,6BAAzB,CAAH,CArQK,CAsQL,aAAK,qFAAL,CAA0F,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAA1F,CAA2I,wBAA3I,CAAmK,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAAnK,CAAoN,yCAApN,CAA6P,kBAAY,UAAU,CAAC,GAAvB,EAA6B,aAA7B,CAA7P,CAAsT,GAAtT,CAtQK,CAuQL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;CAFF,CAAL,CAvQK,CAgRL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,wBAAzB,CAAH,CAA+D;cAA/D,CACW,kBAAY,UAAU,CAAC,GAAvB,EAA6B,mBAA7B,CADX,CAC0E,kGAD1E,CAC4K,kBAAY,UAAU,CAAC,GAAvB,EAA6B,cAA7B,CAD5K,CACsO,qFADtO,CAC2T,kBAAY,UAAU,CAAC,GAAvB,EAA6B,WAA7B,CAD3T,CACkX,QADlX,CAhRK,CAkRL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAlRK,CAwUL,aAAK,yHAAL,CAA8H,kBAAY,UAAU,CAAC,GAAvB,EAA6B,aAA7B,CAA9H,CAAuL,mHAAvL,CAA0S,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAA1S,CAA8V,0GAA9V,CAAwc,kBAAY,UAAU,CAAC,GAAvB,EAA6B,MAA7B,CAAxc,CAA0f,qFAA1f,CAxUK,CAyUL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,wBAAzB,CAAH,CAA+D;sNAA/D,CAzUK,CA2UL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CA3UK,CAqWL,SAAQ,CACN,KAAM,mBADA,CAAR,CAEK,mBAFL,CArWK,CAwWL,aAAK,8RAAL,CAxWK,CAyWL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,4BAAzB,CAAH,CAAmE;kBAAnE,CACe,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CADf,CACmE,6DADnE,CACgI,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CADhI,CACoL,uBADpL,CAC2M,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAD3M,CAC4P,iCAD5P,CAzWK,CA2WL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;CAFF,CAAL,CA3WK,CAsXL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,mBAAzB,CAAH,CAA0D;0NAA1D,CAtXK,CAwXL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAxXK,CAgaL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,mBAAzB,CAAH,CAA0D;yGAA1D,CACsG,kBAAY,UAAU,CAAC,GAAvB,EAA6B,SAA7B,CADtG,CAC2J,2CAD3J,CAhaK,CAkaL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAlaK,CAgcL,aAAG,oBAAK,UAAU,CAAC,GAAhB,EAAwB,CACvB,MAAO,kIADgB,CAEvB,MAAO,IAFgB,CAAxB,EAAH,CAhcK,CAocL,SAAQ,CACN,KAAM,sBADA,CAAR,CAEK,sBAFL,CApcK,CAucL,aAAK,4KAAL,CAvcK,CAwcL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,iBAAzB,CAAH,CAxcK,CAycL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAzcK,CAgeL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,OAAzB,CAAH,CAheK,CAieL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAjeK,CAghBL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,QAAzB,CAAH,CAhhBK,CAihBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAjhBK,CAkjBL,aAAG,oBAAK,UAAU,CAAC,GAAhB,EAAwB,CACvB,MAAO,kIADgB,CAEvB,MAAO,SAFgB,CAAxB,EAAH,CAljBK,CAsjBL,SAAQ,CACN,KAAM,gBADA,CAAR,CAEK,gBAFL,CAtjBK,CAyjBL,aAAK,2JAAL,CAzjBK,CA0jBL,cACE,UAAI,UAAU,CAAC,IAAf,EAAsB,4BAAtB,CADF,CAEE,UAAI,UAAU,CAAC,IAAf,EAAsB,0BAAtB,CAFF,CA1jBK,CA8jBL,SAAQ,CACN,KAAM,4BADA,CAAR,CAEK,4BAFL,CA9jBK,CAikBL,aAAK,0JAAL,CAA+J,kBAAY,UAAU,CAAC,GAAvB,EAA6B,cAA7B,CAA/J,CAAyN,4FAAzN,CAjkBK,CAkkBL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,QAAzB,CAAH,CAA+C;+LAA/C,CAlkBK,CAokBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;CAFF,CAAL,CApkBK,CA+kBL,aAAK,eAAL,CAAoB,kBAAY,UAAU,CAAC,GAAvB,EAA6B,IAA7B,CAApB,CAAoE,qEAApE,CAAyI,kBAAY,UAAU,CAAC,GAAvB,EAA6B,KAA7B,CAAzI,CAA0L,qGAA1L,CA/kBK,CAglBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;CAFF,CAAL,CAhlBK,CAslBL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,QAAzB,CAAH,CAA+C;qGAA/C,CAtlBK,CAwlBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;CAFF,CAAL,CAxlBK,CAumBL,SAAQ,CACN,KAAM,iCADA,CAAR,CAEK,iCAFL,CAvmBK,CA0mBL,aAAK,waAAL,CA1mBK,CA2mBL,aAAG,cAAQ,UAAU,CAAC,GAAnB,EAAyB,uBAAzB,CAAH,CA3mBK,CA4mBL,aAAK,qJAAL,CA5mBK,CA6mBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;CAAjC,CAAL,CA7mBK,CA+mBL,aAAK;kBAAL,CA/mBK,CAinBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;CAAjC,CAAL,CAjnBK,CAmnBL,aAAK,gQAAL,CAnnBK,CAonBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;CAAjC,CAAL,CApnBK,CAsnBL,aAAK,2GAAL,CAtnBK,CAunBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;CAAjC,CAAL,CAvnBK,CAynBL,aAAK,qDAAL,CAA0D,kBAAY,UAAU,CAAC,GAAvB,EAA6B,YAA7B,CAA1D,CAAkH,oEAAlH,CAznBK,CA0nBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;;;;;;;CAAjC,CAAL,CA1nBK,CAkoBL,aAAK,0EAAL,CAloBK,CAmoBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,EAA3B,EAAiC;CAAjC,CAAL,CAnoBK,CAqoBL,aAAK;sKAAL,CAroBK,CAuoBL,SAAQ,CACN,KAAM,+BADA,CAAR,CAEK,+BAFL,CAvoBK,CA0oBL,aAAG,kBAAY,UAAU,CAAC,GAAvB,EAA6B,OAA7B,CAAH,CAAsD,qBAAtD,CAA2E,kBAAY,UAAU,CAAC,GAAvB,EAA6B,UAA7B,CAA3E,CAAiI,iDAAjI,CA1oBK,CA2oBL,aAAK,iDAAL,CA3oBK,CA4oBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;CAFF,CAAL,CA5oBK,CA+pBL,aAAK,sCAAL,CA/pBK,CAgqBL,eAAK,qBAAM,UAAU,CAAC,KAAjB,EAA2B,CAC5B,YAAa,eADe,CAA3B,EAEE;;;;;;;;;;;;;;;;;;;;;;CAFF,CAAL,CAhqBK,CAyrBL,SAAQ,CACN,KAAM,YADA,CAAR,CAEK,YAFL,CAzrBK,CA4rBL,aAAK,2KAAL,CAAgL,kBAAY,UAAU,CAAC,GAAvB,EAA6B,QAA7B,CAAhL,CAAoO,ubAApO,CA5rBK,CAAP,CA8rBD,CAED,CACAD,UAAU,CAACG,cAAX,CAA4B,IAA5B","sourcesContent":["\n  import React from 'react';\n  import { mdx } from '@mdx-js/react';\n\n  export const frontMatter = {\n\tid: 'grpc-rust',\n\ttitle: 'A beginners guide to gRPC with Rust',\n\tauthor: 'Anshul Goyal',\n\tauthor_url: 'https://github.com/anshulrgoyal',\n\tauthor_image_url: '/img/anshul.jpg',\n\ttags: [\n\t\t'rust',\n\t\t'grpc'\n\t]\n};\nexport const metadata = {\n  \"permalink\": \"/blog/grpc-rust\",\n  \"source\": \"@site/blog/2020-04-24-rust-grpc.md\",\n  \"description\": \"Table of Contents\",\n  \"date\": \"2020-04-24T00:00:00.000Z\",\n  \"tags\": [\n    {\n      \"label\": \"rust\",\n      \"permalink\": \"/blog/tags/rust\"\n    },\n    {\n      \"label\": \"grpc\",\n      \"permalink\": \"/blog/tags/grpc\"\n    }\n  ],\n  \"title\": \"A beginners guide to gRPC with Rust\",\n  \"readingTime\": 19.355,\n  \"truncated\": true,\n  \"prevItem\": {\n    \"title\": \"All in one guide for creating a killer API with Strapi\",\n    \"permalink\": \"/blog/strapi\"\n  },\n  \"nextItem\": {\n    \"title\": \"Rust and Node.js: A match made in heaven\",\n    \"permalink\": \"/blog/nodejs-rust-match\"\n  }\n};\n  /* @jsx mdx */\n\nexport const rightToc = [{\n  value: 'Brief Intro to gRPC',\n  id: 'brief-intro-to-grpc',\n  children: []\n}, {\n  value: 'A Little about Rust',\n  id: 'a-little-about-rust',\n  children: []\n}, {\n  value: 'Syntax',\n  id: 'syntax',\n  children: []\n}, {\n  value: 'Compiling Protocol Buffers',\n  id: 'compiling-protocol-buffers',\n  children: []\n}, {\n  value: 'Streaming Response',\n  id: 'streaming-response',\n  children: []\n}, {\n  value: 'Streaming Request',\n  id: 'streaming-request',\n  children: []\n}, {\n  value: 'Bidirectional Stream',\n  id: 'bidirectional-stream',\n  children: []\n}, {\n  value: 'Token-Based Authentication',\n  id: 'token-based-authentication',\n  children: []\n}, {\n  value: 'Mutual TLS Based Authentication',\n  id: 'mutual-tls-based-authentication',\n  children: []\n}, {\n  value: 'Configuring Client and Server',\n  id: 'configuring-client-and-server',\n  children: []\n}];\n\nconst layoutProps = {\n  rightToc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"table-of-contents\"\n    }}>{`Table of Contents`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Introduction`}</li>\n      <li parentName=\"ol\">{`Protocol Buffer`}</li>\n      <li parentName=\"ol\">{`Rust and gRPC`}</li>\n      <li parentName=\"ol\">{`Creating a Server`}</li>\n      <li parentName=\"ol\">{`Creating a Client`}</li>\n      <li parentName=\"ol\">{`Streaming in gRPC`}</li>\n      <li parentName=\"ol\">{`Authentication`}</li>\n      <li parentName=\"ol\">{`Conclusion`}</li>\n    </ol>\n    {\n      /*truncate*/\n    }\n    <h1 {...{\n      \"id\": \"introduction\"\n    }}>{`Introduction`}</h1>\n    <p>{`HTTP and JSON is a very popular method for creating web APIs. HTTP and JSON make sense because it uses a very popular protocol. HTTP and JSON are text-based protocol which causes a performance problem since serializing JSON is a slow process, most HTTP and JSON or Rest APIs do not support streaming which means we cannot start processing the data before it arrives. Rest APIs have very good tooling and community support. Almost every programming language has a high-quality implementation for HTTP and serializing JSON. Rest architecture doesn’t fit every use case, it is difficult to provide client library for Rest APIs for every language and maintain these libraries. Since there is no language-independent method for defining the structure of JSON and HTTP requests, therefore, it is difficult to generate client libraries. gRPC is an attempt to tackle these problems.`}</p>\n    <h2 {...{\n      \"id\": \"brief-intro-to-grpc\"\n    }}>{`Brief Intro to gRPC`}</h2>\n    <p>{`gRPC is an open-source remote procedure call system developed by Google. gRPC allows the system to communicate in and out of data centers, efficiently transferring data from mobile, IoT devices, backends to one and other. gRPC came with plug able support for load balancing, authentication, tracing, etc. gRPC supports bidirectional streaming over HTTP/2. gRPC provides an idiomatic implementation in 10 languages. gRPC can generate efficient client libraries and uses the protocol buffer format for transferring data over the wire. Protocol buffers are a binary format for data transmission. Since protocol buffers are a binary protocol, it can be serialized fast and the structure of each message must be predefined.`}</p>\n    <h2 {...{\n      \"id\": \"a-little-about-rust\"\n    }}>{`A Little about Rust`}</h2>\n    <p>{`Rust is a systems programming language. Rust provides high level ergonomic with low-level control. Rust provides control over memory management without the hassle associated with it. Rust has good support for Asynchronous operation making it a good fit for writing networking applications. Rust has zero cost abstraction making it blazing fast.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://paper-attachments.dropbox.com/s_59BE9A5DB3EFBE4D28334D77611F2324BC09BD447D8DEAD39CC6417F47CAB169_1587676359774_grpc-2.png\",\n        \"alt\": \"Work Flow Source(https://blog.logrocket.com/creating-a-crud-api-with-node-express-and-grpc/)\"\n      }}></img></p>\n    <h1 {...{\n      \"id\": \"protocol-buffers\"\n    }}>{`Protocol Buffers`}</h1>\n    <p>{`Protocol buffers are extensible, language-neutral data serializing mechanism. It is fast, small, and simple. Protocol buffers have a predefined structure with its syntax for defining messages and services. Services are functions that can be executed and messages are arguments passed to the function and values returned by these functions. There are two versions of protocol buffers. This tutorial would use version 3.`}</p>\n    <h2 {...{\n      \"id\": \"syntax\"\n    }}>{`Syntax`}</h2>\n    <p>{`Protocol Buffers have a very simple syntax. There are two things to be defined in a protocol buffer.`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`service`}</inlineCode>{` It defines all the functionality that can be called on a particular service or server.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`message`}</inlineCode>{` It defines arguments and returns values of an `}<inlineCode parentName=\"li\">{`RPC`}</inlineCode>{` call.`}</li>\n    </ul>\n    <p>{`The `}<inlineCode parentName=\"p\">{`syntax`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`package`}</inlineCode>{` must be defined in every protocol buffer file. Protocol buffer files are saved with `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` extension.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-proto\"\n      }}>{`    // version of protocol buffer used\n    syntax = \"proto3\";\n\n    // package name for the buffer will be used later\n    package hello;\n\n    // service which can be executed\n    service Say {\n    // function which can be called\n      rpc Send (SayRequest) returns (SayResponse);\n    }\n\n    // argument\n    message SayRequest {\n    // data type and position of data\n      string name = 1;\n    }\n\n    // return value\n    message SayResponse {\n    // data type and position of data\n      string message = 1;\n    }\n`}</code></pre>\n    <p>{`A service is defined by using `}<inlineCode parentName=\"p\">{`service`}</inlineCode>{` keyword then defining call using `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` keyword, `}<inlineCode parentName=\"p\">{`send`}</inlineCode>{` is the name of the call, it can be used to make a call, `}<inlineCode parentName=\"p\">{`SayRequest`}</inlineCode>{` define the argument `}<inlineCode parentName=\"p\">{`send`}</inlineCode>{` call takes and `}<inlineCode parentName=\"p\">{`SayResponse`}</inlineCode>{` defines the value returned by the call. Any number of the call can be defined in service.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-proto\"\n      }}>{`    service Say {\n    // function which can be called\n      rpc Send (SayRequest) returns (SayResponse);\n      rpc Take (SayRequest) returns (SayResponse);\n    }\n`}</code></pre>\n    <p><em parentName=\"p\">{`Implementation of these function is not defined in the`}</em>{` `}<inlineCode parentName=\"p\">{`*.proto*`}</inlineCode>{` `}<em parentName=\"p\">{`file, these implementations are provided by the server`}</em></p>\n    <p><strong parentName=\"p\">{`Assign Number to Fields`}</strong>{`\nThe number assigned to a field is very important because it is used to recognize the field in binary data. It takes 1 byte to encode 0-15 numbers and 2 bytes for encoding 16-2047, it is wise to use 0-15 for frequently occurring data. It is also recommended to reserve a few numbers so that, these reserved numbers can be used later if some changes are made to format.`}</p>\n    <p><strong parentName=\"p\">{`Different Data Types`}</strong></p>\n    <p>{`Prototype support many data types include string, int, float, boolean, etc. These types can be repeated using `}<inlineCode parentName=\"p\">{`repeated`}</inlineCode>{` field attributes.`}</p>\n    <p>{`Protocol buffer syntax is explained in great detail in `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.google.com/protocol-buffers/docs/proto\"\n      }}>{`official documentation.`}</a></p>\n    <h1 {...{\n      \"id\": \"rust-and-grpc\"\n    }}>{`Rust and gRPC`}</h1>\n    <p>{`Rust ecosystem has grown quite big with very good quality crates. `}<inlineCode parentName=\"p\">{`tonic`}</inlineCode>{` is very performant gRPC implementation for Rust. This tutorial uses `}<inlineCode parentName=\"p\">{`tonic`}</inlineCode>{` as the gRPC implementation and `}<inlineCode parentName=\"p\">{`tonic-build`}</inlineCode>{` for compiling `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` files to client libraries.\nLet us start by creating a new cargo project using `}<inlineCode parentName=\"p\">{`cargo init`}</inlineCode>{`. Now we need to create an add a few dependencies and build dependencies. These will help us with our server and client.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-toml\"\n      }}>{`    [package]\n    name = \"grpc\"\n    version = \"0.1.0\"\n    authors = [\"Anshul Goyal <anshulgoel151999@gmail.com>\"]\n    edition = \"2018\"\n\n    [dependencies]\n    prost = \"0.6.1\"\n    tonic = {version=\"0.2.0\",features = [\"tls\"]}\n    tokio = {version=\"0.2.18\",features = [\"stream\", \"macros\"]}\n    futures = \"0.3\"\n\n    [build-dependencies]\n    tonic-build = \"0.2.0\"\n`}</code></pre>\n    <p>{`This should be a configuration for `}<inlineCode parentName=\"p\">{`Cargo.toml`}</inlineCode>{` file. `}<inlineCode parentName=\"p\">{`prost`}</inlineCode>{` provides basic types for gRPC, `}<inlineCode parentName=\"p\">{`tokio`}</inlineCode>{` provide asynchronous runtime and `}<inlineCode parentName=\"p\">{`futures`}</inlineCode>{` for handling asynchronous streams.`}</p>\n    <h2 {...{\n      \"id\": \"compiling-protocol-buffers\"\n    }}>{`Compiling Protocol Buffers`}</h2>\n    <p>{`We would use `}<inlineCode parentName=\"p\">{`build.rs`}</inlineCode>{` for compiling our `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` files and include then in binary. `}<inlineCode parentName=\"p\">{`tonic-build`}</inlineCode>{` crate provides a method `}<inlineCode parentName=\"p\">{`compile_protos`}</inlineCode>{` which take the path to `}<inlineCode parentName=\"p\">{`.ptoto`}</inlineCode>{` file and compile it to rust definitions. First, we create a folder in the root directory named `}<inlineCode parentName=\"p\">{`proto`}</inlineCode>{` it will contain all of out `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` files. We create a `}<inlineCode parentName=\"p\">{`say.proto`}</inlineCode>{` file in this directory. With our `}<inlineCode parentName=\"p\">{`Say`}</inlineCode>{` service shown in the above example.`}</p>\n    <p>{`We create a `}<inlineCode parentName=\"p\">{`build.rs`}</inlineCode>{` with the following code.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    fn main()->Result<(),Box<dyn std::error::Error>>{\n    // compiling protos using path on build time\n       tonic_build::compile_protos(\"proto/say.proto\")?;\n       Ok(())\n    }\n`}</code></pre>\n    <p>{`The above code will compile `}<inlineCode parentName=\"p\">{`proto/say.proto`}</inlineCode>{` file and save it in an `}<inlineCode parentName=\"p\">{`OUT_DIR`}</inlineCode>{` and add an environment variable `}<inlineCode parentName=\"p\">{`OUT_DIR`}</inlineCode>{` which is available at build time so that we can use it later in our code. We can also provide different options for compiling the protocol buffers. Now your directory structure should look like this:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    ├── build.rs\n    ├── Cargo.lock\n    ├── Cargo.toml\n    ├── proto\n    │   └── say.proto\n    ├── src\n        ├── main.rs\n`}</code></pre>\n    <p>{`Now we have compiled our `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` files we would use it in our code using `}<inlineCode parentName=\"p\">{`tonic`}</inlineCode>{` utility. We would create a module for our server and client. Let us name it `}<inlineCode parentName=\"p\">{`hell.rs`}</inlineCode>{` and we would add the following code.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    // this would include code generated for package hello from .proto file\n    tonic::include_proto!(\"hello\");\n\n`}</code></pre>\n    <h1 {...{\n      \"id\": \"creating-a-server\"\n    }}>{`Creating a Server`}</h1>\n    <p>{`Now we have compiled the protocol buffers we are ready to build our server. We have to provide the implementation for every service and `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` we defined. Service would be defined as traits and `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` would be a member function on these traits. Since Rust doesn't support async traits we have to use an `}<inlineCode parentName=\"p\">{`asyc_trait`}</inlineCode>{` macro for overcoming this limitation. We create a file named `}<inlineCode parentName=\"p\">{`server.rs`}</inlineCode>{` and add the following code.`}</p>\n    <p><inlineCode parentName=\"p\">{`**tonic-build**`}</inlineCode>{` `}<strong parentName=\"p\">{`would automatically compile`}</strong>{` `}<inlineCode parentName=\"p\">{`**.proto**`}</inlineCode>{` `}<strong parentName=\"p\">{`following rust naming conventions and best practices.`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use tonic::{transport::Server, Request, Response, Status};\n    use hello::say_server::{Say, SayServer};\n    use hello::{SayResponse, SayRequest};\n    mod hello;\n\n    // defining a struct for our service\n    #[derive(Default)]\n    pub struct MySay {}\n\n    // implementing rpc for service defined in .proto\n    #[tonic::async_trait]\n    impl Say for MySay {\n    // our rpc impelemented as function\n        async fn send(&self,request:Request<SayRequest>)->Result<Response<SayResponse>,Status>{\n    // returning a response as SayResponse message as defined in .proto\n            Ok(Response::new(SayResponse{\n    // reading data from request which is awrapper around our SayRequest message defined in .proto\n                 message:format!(\"hello {}\",request.get_ref().name),\n            }))\n        }\n    }\n\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n    // defining address for our service\n        let addr = \"[::1]:50051\".parse().unwrap();\n    // creating a service\n        let say = MySay::default();\n        println!(\"Server listening on {}\", addr);\n    // adding our service to our server.\n        Server::builder()\n            .add_service(SayServer::new(say))\n            .serve(addr)\n            .await?;\n        Ok(())\n    }\n`}</code></pre>\n    <p>{`In Rust, messages are represented as structs and services as traits and RPC as functions. We `}<inlineCode parentName=\"p\">{`impl`}</inlineCode>{` the trait for our struct and pass it to our server. In our example, we would create a send function which takes `}<inlineCode parentName=\"p\">{`Request`}</inlineCode>{` as an argument which contains details about the request and wraps our message `}<inlineCode parentName=\"p\">{`SayRequest`}</inlineCode>{` which can be accessed using `}<inlineCode parentName=\"p\">{`.get_ref`}</inlineCode>{` method. Now let us run this by adding a bin block to our `}<inlineCode parentName=\"p\">{`Cargo.toml`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-toml\"\n      }}>{`    [[bin]]\n    name = \"server\"\n    path = \"src/server.rs\"\n`}</code></pre>\n    <p>{`This will help us testing and maintaining code in save repo but it is not suggested for a large project.\nNow if we run this with command `}<inlineCode parentName=\"p\">{`cargo run`}</inlineCode>{` `}<inlineCode parentName=\"p\">{`--\\`\\`bin server`}</inlineCode>{`. We can see our server running at `}<inlineCode parentName=\"p\">{`127:0:0:1:50051`}</inlineCode>{`.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://paper-attachments.dropbox.com/s_59BE9A5DB3EFBE4D28334D77611F2324BC09BD447D8DEAD39CC6417F47CAB169_1587642193283_image.png\",\n        \"alt\": \"Example\"\n      }}></img></p>\n    <h1 {...{\n      \"id\": \"creating-a-client\"\n    }}>{`Creating a Client`}</h1>\n    <p>{`Our server is ready, now let's test it by creating a client. Since we have compiled our protocol buffer we can import our `}<inlineCode parentName=\"p\">{`hello.rs`}</inlineCode>{` file and use it. We create a `}<inlineCode parentName=\"p\">{`client.rs`}</inlineCode>{` file and add the following code.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use hello::say_client::SayClient;\n    use hello::SayRequest;\n\n    mod hello;\n\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n    // creating a channel ie connection to server\n        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n        .connect()\n        .await?;\n    // creating gRPC client from channel\n        let mut client = SayClient::new(channel);\n    // creating a new Request\n        let request = tonic::Request::new(\n            SayRequest {\n               name:String::from(\"anshul\")\n            },\n        );\n    // sending request and waiting for response\n        let response = client.send(request).await?.into_inner();\n        println!(\"RESPONSE={:?}\", response);\n        Ok(())\n    }\n`}</code></pre>\n    <p>{`We add a bin key to our `}<inlineCode parentName=\"p\">{`Cargo.toml`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-toml\"\n      }}>{`    [[bin]]\n    name = \"client\"\n    path = \"src/client.rs\"\n`}</code></pre>\n    <p>{`We create a channel that is an HTTP/2 connection that can be used then from our client. HTTP/2 support streams that can be used by gRPC. Now if we run our client with command `}<inlineCode parentName=\"p\">{`cargo run`}</inlineCode>{` `}<inlineCode parentName=\"p\">{`--bin client`}</inlineCode>{` we can see see the response.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://paper-attachments.dropbox.com/s_59BE9A5DB3EFBE4D28334D77611F2324BC09BD447D8DEAD39CC6417F47CAB169_1587643536436_image.png\",\n        \"alt\": null\n      }}></img></p>\n    <h1 {...{\n      \"id\": \"error-handling\"\n    }}>{`Error Handling`}</h1>\n    <p>{`Error handling in gRPC is done using Status. `}<inlineCode parentName=\"p\">{`tonic`}</inlineCode>{` provide `}<inlineCode parentName=\"p\">{`Status`}</inlineCode>{` enum which can be returned in case of error with appropriate error message.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    Err(Status::unauthenticated(\"Token not found\"))\n`}</code></pre>\n    <p>{`gRPC support bare-bone error handling but you can extend yourself using protocol buffer here is `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.google.com/apis/design/errors#error_model\"\n      }}>{`detail explanation`}</a></p>\n    <h1 {...{\n      \"id\": \"streaming-in-grpc\"\n    }}>{`Streaming In gRPC`}</h1>\n    <p>{`HTTP/2 supports streaming and gRPC provides a nice interface for using it. We can start sending the response even before the client finish sends the request. We can use it to provide an efficient service. The server has not to wait for the request from the client to complete the request. We need to make a few changes to our protocol buffers so that it reflects that we support streaming. We need to make changes to our rust code also. Rust has quite good support for asynchronous I/O. We would `}<inlineCode parentName=\"p\">{`tokio`}</inlineCode>{` to stream response and request.`}</p>\n    <h2 {...{\n      \"id\": \"streaming-response\"\n    }}>{`Streaming Response`}</h2>\n    <p>{`We would start by the streaming server since most of the time server would be sending a large amount of data. We would use a queue for sending data by multiplexing different task on a single thread. `}<inlineCode parentName=\"p\">{`tokio`}</inlineCode>{` provide very excellent multi sender single receiver channel.`}</p>\n    <p><strong parentName=\"p\">{`Changes to protocol buffers`}</strong></p>\n    <p>{`We change the code of protocol buffer to the following. We use a stream keyword in `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` and specify that the `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` call will return a stream of messages `}<inlineCode parentName=\"p\">{`SayResponse`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    service Say {\n    // function which can be called\n      rpc Send (SayRequest) returns (SayResponse);\n    // we specify that we return a stream\n      rpc SendStream(SayRequest) returns (stream SayResponse);\n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Changes to Server Code`}</strong>{`\nWe would use `}<inlineCode parentName=\"p\">{`tokio::sync::mpsc`}</inlineCode>{` for communicating between futures. We send multiple responses using this channel. We would use `}<inlineCode parentName=\"p\">{`tokio::spawn`}</inlineCode>{` to create a new task that can be then scheduled. We add the following code to our `}<inlineCode parentName=\"p\">{`server.rs`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use tokio::sync::mpsc;\n    use tonic::{transport::Server, Request, Response, Status};\n    use hello::say_server::{Say, SayServer};\n    use hello::{SayRequest, SayResponse};\n    mod hello;\n\n    #[derive(Default)]\n    pub struct MySay {}\n    #[tonic::async_trait]\n    impl Say for MySay {\n    // Specify the output of rpc call\n        type SendStreamStream=mpsc::Receiver<Result<SayResponse,Status>>;\n    // implementation for rpc call\n        async fn send_stream(\n            &self,\n            request: Request<SayRequest>,\n        ) -> Result<Response<Self::SendStreamStream>, Status> {\n    // creating a queue or channel\n            let (mut tx, rx) = mpsc::channel(4);\n    // creating a new task\n            tokio::spawn(async move {\n    // looping and sending our response using stream\n                for _ in 0..4{\n    // sending response to our channel\n                    tx.send(Ok(SayResponse {\n                        message: format!(\"hello\"),\n                    }))\n                    .await;\n                }\n            });\n    // returning our reciever so that tonic can listen on reciever and send the response to client\n            Ok(Response::new(rx))\n        }\n        async fn send(&self, request: Request<SayRequest>) -> Result<Response<SayResponse>, Status> {\n            Ok(Response::new(SayResponse {\n                message: format!(\"hello {}\", request.get_ref().name),\n            }))\n        }\n    }\n\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let addr = \"[::1]:50051\".parse().unwrap();\n        let say = MySay::default();\n        println!(\"Server listening on {}\", addr);\n        Server::builder()\n            .add_service(SayServer::new(say))\n            .serve(addr)\n            .await?;\n        Ok(())\n    }\n`}</code></pre>\n    <p>{`We need to change the main function, we just add a new function to trait and a type to specify our output. In this new `}<inlineCode parentName=\"p\">{`send_stream`}</inlineCode>{` function we create a channel so that we can send a response and return the receiver. The receiver implements the`}<inlineCode parentName=\"p\">{`Stream`}</inlineCode>{` trait so it can be streamed by HTTP/2 and the sender can be used by multiple threads and it implements `}<inlineCode parentName=\"p\">{`Sink`}</inlineCode>{` trait. We have created a bounded channel but we can also use an unbounded channel.`}</p>\n    <p><strong parentName=\"p\">{`Changes in Client Code`}</strong>{`\nWe need to make changes to response handling. Since it would be a stream now, we would just listen to this stream and print the response. Streams help to write non-blocking code and use resources more efficiently.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use hello::say_client::SayClient;\n    use hello::SayRequest;\n    mod hello;\n\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n        .connect()\n        .await?;\n        let mut client = SayClient::new(channel);\n        let request = tonic::Request::new(\n            SayRequest {\n               name:String::from(\"anshul\")\n            },\n        );\n    // now the response is stream\n        let mut response = client.send_stream(request).await?.into_inner();\n    // listening to stream\n        while let Some(res) = response.message().await? {\n            println!(\"NOTE = {:?}\", res);\n        }\n        Ok(())\n    }\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"streaming-request\"\n    }}>{`Streaming Request`}</h2>\n    <p>{`Sometimes all the data is not available, for example in a game all the data is not available then it would make stream the data and send all the data available and sending rest when available. This allows using data more efficiently on user devices. We need a few changes to our code.`}</p>\n    <p><strong parentName=\"p\">{`Changes to protocol buffer`}</strong>{`\nWe would use the `}<inlineCode parentName=\"p\">{`stream`}</inlineCode>{` keyword to specify the argument is a stream. We would use `}<inlineCode parentName=\"p\">{`stream`}</inlineCode>{` to specify that our `}<inlineCode parentName=\"p\">{`rpc`}</inlineCode>{` takes a stream as an argument.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    // service which can be executed\n    service Say {\n    // function which can be called\n      rpc Send (SayRequest) returns (SayResponse);\n      rpc SendStream(SayRequest) returns (stream SayResponse);\n    // taking a stream as response\n      rpc ReceiveStream(stream SayRequest) returns (SayResponse);\n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Changes to Server`}</strong>{`\nWe need our server to accept the stream as the request. We would listen on the stream and collect. Then we would respond when the stream finishes. It will save our resources since we can wait on stream asynchronously.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use tokio::sync::mpsc;\n    use tonic::{transport::Server, Request, Response, Status};\n    use hello::say_server::{Say, SayServer};\n    use hello::{SayRequest, SayResponse};\n    mod hello;\n    #[derive(Default)]\n    pub struct MySay {}\n    #[tonic::async_trait]\n    impl Say for MySay {\n    // .. rest of rpcs\n    // create a new rpc to receive a stream\n        async fn receive_stream(\n            &self,\n            request: Request<tonic::Streaming<SayRequest>>,\n        ) -> Result<Response<SayResponse>, Status> {\n    // converting request into stream\n            let mut stream = request.into_inner();\n            let mut message = String::from(\"\");\n    // listening on stream\n            while let Some(req) = stream.message().await? {\n                message.push_str(&format!(\"Hello {}\\\\n\", req.name))\n            }\n    // returning response\n            Ok(Response::new(SayResponse { message }))\n        }\n    }\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let addr = \"[::1]:50051\".parse().unwrap();\n        let say = MySay::default();\n        println!(\"Server listening on {}\", addr);\n        Server::builder()\n            .add_service(SayServer::new(say))\n            .serve(addr)tes());\n            .await?;\n        Ok(())\n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Changes to Client`}</strong>{`\nWe would now program our client to send a stream to our server. For this, we would mimic a stream using `}<inlineCode parentName=\"p\">{`futures`}</inlineCode>{` crate and create a stream from a vector.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use futures::stream::iter;\n    use hello::say_client::SayClient;\n    use hello::SayRequest;\n    mod hello;\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n            .connect()\n            .await?;\n        let mut client = SayClient::new(channel);\n    // creating a stream\n        let request = tonic::Request::new(iter(vec![\n            SayRequest {\n                name: String::from(\"anshul\"),\n            },\n            SayRequest {\n                name: String::from(\"rahul\"),\n            },\n            SayRequest {\n                name: String::from(\"vijay\"),\n            },\n        ]));\n    // sending stream\n        let response = client.receive_stream(request).await?.into_inner();\n        println!(\"RESPONSE=\\\\n{}\", response.message);\n        Ok(())\n    }\n`}</code></pre>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://paper-attachments.dropbox.com/s_59BE9A5DB3EFBE4D28334D77611F2324BC09BD447D8DEAD39CC6417F47CAB169_1587657121220_image.png\",\n        \"alt\": null\n      }}></img></p>\n    <h2 {...{\n      \"id\": \"bidirectional-stream\"\n    }}>{`Bidirectional Stream`}</h2>\n    <p>{`The bidirectional stream is also supported by gRPC. The bidirectional stream is just a combination of streaming requests and streaming responses. Here is a quick example.`}</p>\n    <p><strong parentName=\"p\">{`Protocol buffer`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`\n    // version of protocol buffer used\n    syntax = \"proto3\";\n    // package name for buffer will be used later\n    package hello;\n    // service which can be executed\n    service Say {\n    // takes a stream and returns a stream\n      rpc Bidirectional(stream SayRequest) returns (stream SayResponse);\n    }\n    // argument\n    message SayRequest {\n    // data type and position of data\n      string name = 1;\n    }\n    // return value\n    message SayResponse {\n    // data type and position of data\n      string message = 1;\n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Sever`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use tokio::sync::mpsc;\n    use tonic::{transport::Server, Request, Response, Status};\n    use hello::say_server::{Say, SayServer};\n    use hello::{SayRequest, SayResponse};\n    mod hello;\n    #[derive(Default)]\n    pub struct MySay {}\n    #[tonic::async_trait]\n    impl Say for MySay {\n    // defining return stream\n        type BidirectionalStream = mpsc::Receiver<Result<SayResponse, Status>>;\n        async fn bidirectional(\n            &self,\n            request: Request<tonic::Streaming<SayRequest>>,\n        ) -> Result<Response<Self::BidirectionalStream>, Status> {\n    // converting request in stream\n            let mut streamer = request.into_inner();\n    // creating queue\n            let (mut tx, rx) = mpsc::channel(4);\n            tokio::spawn(async move {\n    // listening on request stream\n                while let Some(req) = streamer.message().await.unwrap(){\n    // sending data as soon it is available\n                    tx.send(Ok(SayResponse {\n                        message: format!(\"hello {}\", req.name),\n                    }))\n                    .await;\n                }\n            });\n    // returning stream as receiver\n            Ok(Response::new(rx))\n        }\n    }\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let addr = \"[::1]:50051\".parse().unwrap();\n        let say = MySay::default();\n        println!(\"Server listening on {}\", addr);\n        Server::builder()\n            .add_service(SayServer::new(say))\n            .serve(addr)\n            .await?;\n        Ok(())\n    }\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Client`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    use futures::stream::iter;\n    use hello::say_client::SayClient;\n    use hello::SayRequest;\n    mod hello;\n    #[tokio::main]\n    async fn main() -> Result<(), Box<dyn std::error::Error>> {\n        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n            .connect()\n            .await?;\n        let mut client = SayClient::new(channel);\n    // creating a client\n        let request = tonic::Request::new(iter(vec![\n            SayRequest {\n                name: String::from(\"anshul\"),\n            },\n            SayRequest {\n                name: String::from(\"rahul\"),\n            },\n            SayRequest {\n                name: String::from(\"vijay\"),\n            },\n        ]));\n    // calling rpc\n        let mut response = client.bidirectional(request).await?.into_inner();\n    // listening on the response stream\n        while let Some(res) = response.message().await? {\n            println!(\"NOTE = {:?}\", res);\n        }\n        Ok(())\n    }\n`}</code></pre>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"https://paper-attachments.dropbox.com/s_59BE9A5DB3EFBE4D28334D77611F2324BC09BD447D8DEAD39CC6417F47CAB169_1587658480089_image.png\",\n        \"alt\": \"Example\"\n      }}></img></p>\n    <h1 {...{\n      \"id\": \"authentication\"\n    }}>{`Authentication`}</h1>\n    <p>{`Authentication is a very important aspect of a system. gRPC comes with plug able authentication support. gRPC support mainly two types of authentication:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Token-based authentication`}</li>\n      <li parentName=\"ul\">{`TLS based authentication`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"token-based-authentication\"\n    }}>{`Token-Based Authentication`}</h2>\n    <p>{`In this tutorial, we would use JWT based authentication. JWT or JSON web token provides an open-source and stateless authentication mechanism. We would `}<inlineCode parentName=\"p\">{`jsonwebtoken`}</inlineCode>{` crate for creating JWT and validating it. We would just see how we can use JWT with gRPC.`}</p>\n    <p><strong parentName=\"p\">{`Server`}</strong>{`\nWe would need to add an interceptor, that would validate token, if the token is not valid, we would just close the request, if the token is valid then we forward the request to our handlers.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    fn interceptor(req:Request<()>)->Result<Request<()>,Status>{\n        let token=match req.metadata().get(\"authorization\"){\n            Some(token)=>token.to_str(),\n            None=>return Err(Status::unauthenticated(\"Token not found\"))\n        };\n        // do some validation with token here ...\n        Ok(req)\n    }\n`}</code></pre>\n    <p>{`If we return `}<inlineCode parentName=\"p\">{`Ok`}</inlineCode>{` then the request would be passed on to functions but if we return `}<inlineCode parentName=\"p\">{`Err`}</inlineCode>{` with status the request is closed with provided status. We create a service with this interceptor.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`    let say = MySay::default();\n    let ser = SayServer::with_interceptor(say,interceptor);\n    Server::builder().add_service(ser).serve(addr).await?;\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Client`}</strong>{`\nWe need to add an interceptor to our client also. We would add it to our main function as a closure.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n            .connect()\n            .await?;\n        let token = get_token();// an method to get token can be a rpc call etc.\n        let mut client = SayClient::with_interceptor(channel, move |mut req: Request<()>| {\n    // adding token to request.\n            req.metadata_mut().insert(\n                \"authorization\",\n                tonic::metadata::MetadataValue::from_str(&token).unwrap(),\n            );\n            Ok(req)\n        });\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"mutual-tls-based-authentication\"\n    }}>{`Mutual TLS Based Authentication`}</h2>\n    <p>{`TLS stands for Transport Layer Security, it is recommended by gRPC documentation to encrypt HTTP/2 connection with TLS. We would TLS to authenticate both client and server. This is called Mutual TLS. We would create a private key and public key for both client and server. We would also create a Certificate Authority certificate so that we can sign our TLS certificate. We would require OpenSSL for creating certificates.`}</p>\n    <p><strong parentName=\"p\">{`Creating Certificates`}</strong></p>\n    <p>{`OpenSSL is a command-line utility for creating keys and encryption-related stuff. We would start by creating a Certification Authority certificate.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openssl genrsa -des3 -out my_ca.key 2048\n`}</code></pre>\n    <p>{`This would act as our signing key. We would use it to sign our TLS certificate. Next, we create our certificate which is called the root CA certificate. It is used to validate if our TLS certificate is\nvalidated or not.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openssl req -x509 -new -nodes -key my_ca.key -sha256 -days 1825 -out my_ca.pem\n`}</code></pre>\n    <p>{`This command would ask you a few questions. Details enter in this doesn’t matter. If you can get this certificate on every device on earth you become a certificate signing authority like Let’s Encrypt etc. Now let's create our server key and certificate.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openssL genrsa -out server.key 2048\n`}</code></pre>\n    <p>{`This command will generate a key for our server. Now we create a certificate signing request for our key.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openssl req -new -sha256 -key server.key -out server.csr\n`}</code></pre>\n    <p>{`This would ask you some questions. Now we create a `}<inlineCode parentName=\"p\">{`server.ext`}</inlineCode>{` file. This file would contain our name, our domain, or subdomain.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`authorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = localhost\n`}</code></pre>\n    <p>{`We add our identity in the form of DNS. Now we run the following command`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openssl x509 -req -in server.csr -CA my_ca.pem -CAkey my_ca.key -CAcreateserial -out server.pem -days 1825 -sha256 -extfile server.ext\n`}</code></pre>\n    <p>{`You don’t need to provide your private key or server key. This might ask you a few questions and passcode provided when generating the Certificate Authority key.\nYou can generate a Certificate for the client using the same certificate authority. Now we have all the required certificates to let configure our server and client.`}</p>\n    <h2 {...{\n      \"id\": \"configuring-client-and-server\"\n    }}>{`Configuring Client and Server`}</h2>\n    <p><inlineCode parentName=\"p\">{`tonic`}</inlineCode>{` support TLS using `}<inlineCode parentName=\"p\">{`rust-tls`}</inlineCode>{`. We can configure TLS by following the method.`}</p>\n    <p>{`This shows how to configure the client for TLS.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`        // getting certificate from disk\n        let cert=include_str!(\"../client.pem\");\n        let key=include_str!(\"../client.key\");\n        // creating identify from key and certificate\n        let id=tonic::transport::Identity::from_pem(cert.as_bytes(),key.as_bytes());\n        // importing our certificate for CA\n        let s=include_str!(\"../my_ca.pem\");\n        // converting it into a certificate\n        let ca=tonic::transport::Certificate::from_pem(s.as_bytes());\n        // telling our client what is the identity of our server\n        let tls=tonic::transport::ClientTlsConfig::new().domain_name(\"localhost\").identity(id).ca_certificate(ca);\n        // connecting with tls\n        let channel = tonic::transport::Channel::from_static(\"http://[::1]:50051\")\n            .tls_config(tls)\n            .connect()\n            .await?;\n`}</code></pre>\n    <p>{`This shows how to configure for TLS.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-rust\"\n      }}>{`        let say = MySay::default();\n    // reading cert and key disk\n        let cert = include_str!(\"../server.pem\");\n        let key = include_str!(\"../server.key\");\n    // creating identity from cert and key\n        let id = tonic::transport::Identity::from_pem(cert.as_bytes(), key.as_bytes());\n    // reading ca root from disk\n        let s = include_str!(\"../my_ca.pem\");\n    // creating certificate\n        let ca = tonic::transport::Certificate::from_pem(s.as_bytes());\n    // creating tls config\n        let tls = tonic::transport::ServerTlsConfig::new()\n            .identity(id)\n            .client_ca_root(ca);\n    // creating server with tls\n        Server::builder()\n            .tls_config(tls)\n            .add_service(ser)\n            .serve(addr)\n            .await?;\n        Ok(())\n\n`}</code></pre>\n    <h1 {...{\n      \"id\": \"conclusion\"\n    }}>{`Conclusion`}</h1>\n    <p>{`We have gone through basic protocol buffer and gRPC. We have created our server. We also created a client for interacting with the server. We learned how to compile our `}<inlineCode parentName=\"p\">{`.proto`}</inlineCode>{` file in rust client. We also learned how to stream responses and requests. We also created a bidirectional stream. We learned two different authentication strategy. We implemented JWT and Mutual TLS based authentication. Now you have a basic understanding of gRPC, you can create your own micro-service based app. gRPC comes with support for load-balancing,tracing and health tracking. Now you can explore further functionality of gRPC.`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "]}]}